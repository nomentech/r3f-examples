"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[2746],{2746:function(e,t,r){r.r(t);var n=r(1413),o=r(9439),a=r(2791),i=r(1690),c=r(4647),s=r(4956),u=r(4637),l=r(184),f=function(){var e=(0,a.useState)(2),t=(0,o.Z)(e,2),r=t[0],n=t[1],i=(0,a.useState)(!1),c=(0,o.Z)(i,2),u=c[0],f=c[1];return(0,l.jsxs)("mesh",{scale:.5*r,children:[(0,l.jsx)("boxGeometry",{}),(0,l.jsx)("meshStandardMaterial",{}),(0,l.jsxs)(s.V,{style:{transition:"all 0.2s",opacity:u?0:1,transform:"scale(".concat(u?.5:1,")")},distanceFactor:1.5,position:[0,0,.51],transform:!0,occlude:!0,onOcclude:function(e){return f(e),null},children:[(0,l.jsx)("span",{children:"Size: "}),(0,l.jsx)("input",{type:"number",value:r,onChange:function(e){return n(e.target.valueAsNumber)}})]})]})},d=function(e){var t=(0,a.useRef)();return(0,i.x)((function(e){return t.current.position.x=Math.sin(e.clock.getElapsedTime())})),(0,l.jsxs)("mesh",(0,n.Z)((0,n.Z)({ref:t},e),{},{children:[(0,l.jsx)("sphereGeometry",{args:[.3,32,32]}),(0,l.jsx)("meshStandardMaterial",{color:"orange"})]}))};t.default=function(e){var t=e.children;return(0,l.jsxs)(l.Fragment,{children:[t,(0,l.jsxs)(c.Xz,{dpr:[1,2],camera:{fov:25},children:[(0,l.jsx)("ambientLight",{intensity:.5}),(0,l.jsx)("pointLight",{position:[10,10,5]}),(0,l.jsx)("pointLight",{position:[-10,-10,-10]}),(0,l.jsx)(f,{}),(0,l.jsx)(d,{position:[0,0,1]}),(0,l.jsx)(u.z,{})]})]})}},4637:function(e,t,r){r.d(t,{z:function(){return u}});var n=r(4925),o=r(7462),a=r(1690),i=r(2791),c=r(233),s=["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"],u=i.forwardRef((function(e,t){var r=e.makeDefault,u=e.camera,l=e.regress,f=e.domElement,d=e.enableDamping,m=void 0===d||d,p=e.onChange,v=e.onStart,h=e.onEnd,x=(0,n.Z)(e,s),g=(0,a.w)((function(e){return e.invalidate})),y=(0,a.w)((function(e){return e.camera})),w=(0,a.w)((function(e){return e.gl})),E=(0,a.w)((function(e){return e.events})),M=(0,a.w)((function(e){return e.set})),b=(0,a.w)((function(e){return e.get})),j=(0,a.w)((function(e){return e.performance})),C=u||y,P=f||E.connected||w.domElement,W=i.useMemo((function(){return new c.z(C)}),[C]);return(0,a.x)((function(){W.enabled&&W.update()}),-1),i.useEffect((function(){return W.connect(P),function(){W.dispose()}}),[P,l,W,g]),i.useEffect((function(){var e=function(e){g(),l&&j.regress(),p&&p(e)};return W.addEventListener("change",e),v&&W.addEventListener("start",v),h&&W.addEventListener("end",h),function(){v&&W.removeEventListener("start",v),h&&W.removeEventListener("end",h),W.removeEventListener("change",e)}}),[p,v,h]),i.useEffect((function(){if(r){var e=b().controls;return M({controls:W}),function(){return M({controls:e})}}}),[r,W]),i.createElement("primitive",(0,o.Z)({ref:t,object:W,enableDamping:m},x))}))},4956:function(e,t,r){r.d(t,{V:function(){return E}});var n=r(1413),o=r(9439),a=r(4925),i=r(7462),c=r(2791),s=r(1250),u=r(7760),l=r(1690),f=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],d=new u.Vector3,m=new u.Vector3,p=new u.Vector3;function v(e,t,r){var n=d.setFromMatrixPosition(e.matrixWorld);n.project(t);var o=r.width/2,a=r.height/2;return[n.x*o+o,-n.y*a+a]}var h=function(e){return Math.abs(e)<1e-10?0:e};function x(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="matrix3d(",o=0;16!==o;o++)n+=h(t[o]*e.elements[o])+(15!==o?",":")");return r+n}var g,y=(g=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],function(e){return x(e,g)}),w=function(e,t){return x(e,[1/(r=t),1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1],"translate(-50%,-50%)");var r},E=c.forwardRef((function(e,t){var r,x=e.children,g=e.eps,E=void 0===g?.001:g,M=e.style,b=e.className,j=e.prepend,C=e.center,P=e.fullscreen,W=e.portal,F=e.distanceFactor,z=e.sprite,R=void 0!==z&&z,Z=e.transform,L=void 0!==Z&&Z,S=e.occlude,k=e.onOcclude,I=e.zIndexRange,N=void 0===I?[16777271,0]:I,O=e.calculatePosition,T=void 0===O?v:O,D=e.as,V=void 0===D?"div":D,A=e.wrapperClass,G=e.pointerEvents,_=void 0===G?"auto":G,X=(0,a.Z)(e,f),q=(0,l.w)((function(e){return e.gl})),B=(0,l.w)((function(e){return e.camera})),H=(0,l.w)((function(e){return e.scene})),J=(0,l.w)((function(e){return e.size})),K=(0,l.w)((function(e){return e.raycaster})),Q=c.useState((function(){return document.createElement(V)})),U=(0,o.Z)(Q,1)[0],Y=c.useMemo((function(){return s.createRoot(U)}),[U]),$=c.useRef(null),ee=c.useRef(0),te=c.useRef([0,0]),re=c.useRef(null),ne=c.useRef(null),oe=null!==(r=null==W?void 0:W.current)&&void 0!==r?r:q.domElement.parentNode;c.useEffect((function(){if($.current){if(H.updateMatrixWorld(),L)U.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{var e=T($.current,B,J);U.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return oe&&(j?oe.prepend(U):oe.appendChild(U)),function(){oe&&oe.removeChild(U),Y.unmount()}}}),[oe,L]),c.useLayoutEffect((function(){A&&(U.className=A)}),[A]);var ae=c.useMemo((function(){return L?{position:"absolute",top:0,left:0,width:J.width,height:J.height,transformStyle:"preserve-3d",pointerEvents:"none"}:(0,n.Z)((0,n.Z)({position:"absolute",transform:C?"translate3d(-50%,-50%,0)":"none"},P&&{top:-J.height/2,left:-J.width/2,width:J.width,height:J.height}),M)}),[M,C,P,J,L]),ie=c.useMemo((function(){return{position:"absolute",pointerEvents:_}}),[_]);c.useLayoutEffect((function(){L?Y.render(c.createElement("div",{ref:re,style:ae},c.createElement("div",{ref:ne,style:ie},c.createElement("div",{ref:t,className:b,style:M,children:x})))):Y.render(c.createElement("div",{ref:t,style:ae,className:b,children:x}))}));var ce=c.useRef(!0);return(0,l.x)((function(){if($.current){B.updateMatrixWorld(),$.current.updateWorldMatrix(!0,!1);var e=L?te.current:T($.current,B,J);if(L||Math.abs(ee.current-B.zoom)>E||Math.abs(te.current[0]-e[0])>E||Math.abs(te.current[1]-e[1])>E){var t=function(e,t){var r=d.setFromMatrixPosition(e.matrixWorld),n=m.setFromMatrixPosition(t.matrixWorld),o=r.sub(n),a=t.getWorldDirection(p);return o.angleTo(a)>Math.PI/2}($.current,B),r=!1;"boolean"===typeof S?!0===S&&(r=[H]):Array.isArray(S)&&(r=S.map((function(e){return e.current})));var n=ce.current;if(r){var o=function(e,t,r,n){var o=d.setFromMatrixPosition(e.matrixWorld),a=o.clone();a.project(t),r.setFromCamera(a,t);var i=r.intersectObjects(n,!0);if(i.length){var c=i[0].distance;return o.distanceTo(r.ray.origin)<c}return!0}($.current,B,K,r);ce.current=o&&!t}else ce.current=!t;if(n!==ce.current&&(k?k(!ce.current):U.style.display=ce.current?"block":"none"),U.style.zIndex="".concat(function(e,t,r){if(t instanceof u.PerspectiveCamera||t instanceof u.OrthographicCamera){var n=d.setFromMatrixPosition(e.matrixWorld),o=m.setFromMatrixPosition(t.matrixWorld),a=n.distanceTo(o),i=(r[1]-r[0])/(t.far-t.near),c=r[1]-i*t.far;return Math.round(i*a+c)}}($.current,B,N)),L){var a=J.width/2,i=J.height/2,c=B.projectionMatrix.elements[5]*i,s=B.isOrthographicCamera,l=B.top,f=B.left,v=B.bottom,x=B.right,g=y(B.matrixWorldInverse),M=s?"scale(".concat(c,")translate(").concat(h(-(x+f)/2),"px,").concat(h((l+v)/2),"px)"):"translateZ(".concat(c,"px)"),b=$.current.matrixWorld;R&&((b=B.matrixWorldInverse.clone().transpose().copyPosition(b).scale($.current.scale)).elements[3]=b.elements[7]=b.elements[11]=0,b.elements[15]=1),U.style.width=J.width+"px",U.style.height=J.height+"px",U.style.perspective=s?"":"".concat(c,"px"),re.current&&ne.current&&(re.current.style.transform="".concat(M).concat(g,"translate(").concat(a,"px,").concat(i,"px)"),ne.current.style.transform=w(b,1/((F||10)/400)))}else{var j=void 0===F?1:function(e,t){if(t instanceof u.OrthographicCamera)return t.zoom;if(t instanceof u.PerspectiveCamera){var r=d.setFromMatrixPosition(e.matrixWorld),n=m.setFromMatrixPosition(t.matrixWorld),o=t.fov*Math.PI/180,a=r.distanceTo(n);return 1/(2*Math.tan(o/2)*a)}return 1}($.current,B)*F;U.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(j,")")}te.current=e,ee.current=B.zoom}}})),c.createElement("group",(0,i.Z)({},X,{ref:$}))}))}}]);
//# sourceMappingURL=2746.8dd57bd6.chunk.js.map