"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[890],{5352:function(e,r,t){t.r(r),t.d(r,{default:function(){return x}});var n=t(4647),i=t(4925),a=t(7462),u=t(2791),o=t(7760),v=["userData","children","geometry","threshold","color"];function s(e){e.userData;var r=e.children,t=e.geometry,n=e.threshold,s=void 0===n?15:n,c=e.color,f=void 0===c?"black":c,l=(0,i.Z)(e,v),d=u.useRef(null);return u.useLayoutEffect((function(){var e=d.current.parent;if(e){var r=t||e.geometry;r===d.current.userData.currentGeom&&s===d.current.userData.currentThreshold||(d.current.userData.currentGeom=r,d.current.userData.currentThreshold=s,d.current.geometry=new o.EdgesGeometry(r,s))}})),u.createElement("lineSegments",(0,a.Z)({ref:d,raycast:function(){return null}},l),r||u.createElement("lineBasicMaterial",{color:f}))}var c=t(3655),f=t(9142),l=t(4637),d=t.p+"static/media/headless.ed27d4d0fc7075c0f38f.glb",m=t(184),h=function(){var e=(0,c.L)(d).nodes;return(0,m.jsx)("group",{dispose:null,children:(0,m.jsxs)("mesh",{geometry:e.Cube.geometry,children:[(0,m.jsx)("meshStandardMaterial",{transparent:!0}),(0,m.jsx)(s,{})]})})},x=function(e){var r=e.children;return(0,m.jsxs)(m.Fragment,{children:[r,(0,m.jsxs)(n.Xz,{dpr:[1,2],camera:{position:[0,0,3],fov:50},children:[(0,m.jsx)(u.Suspense,{fallback:null,children:(0,m.jsx)(f.H,{children:(0,m.jsx)(h,{})})}),(0,m.jsx)(l.z,{dampingFactor:.3})]})]})}},8202:function(e,r,t){t.d(r,{j:function(){return d}});var n=t(1413),i=t(9439),a=t(4925),u=t(7462),o=t(2791),v=t(7760),s=t(1690),c={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},f={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},l=["scale","frames","opacity","width","height","blur","far","resolution","smooth","color","depthWrite","renderOrder"],d=o.forwardRef((function(e,r){var t=e.scale,d=void 0===t?10:t,m=e.frames,h=void 0===m?1/0:m,x=e.opacity,p=void 0===x?1:x,g=e.width,y=void 0===g?1:g,D=e.height,U=void 0===D?1:D,w=e.blur,M=void 0===w?1:w,b=e.far,S=void 0===b?10:b,E=e.resolution,j=void 0===E?512:E,C=e.smooth,R=void 0===C||C,T=e.color,Z=void 0===T?"#000000":T,k=e.depthWrite,L=void 0!==k&&k,B=e.renderOrder,G=(0,a.Z)(e,l),W=(0,s.w)((function(e){return e.scene})),A=(0,s.w)((function(e){return e.gl})),P=o.useRef(null);y*=Array.isArray(d)?d[0]:d||1,U*=Array.isArray(d)?d[1]:d||1;var _=o.useMemo((function(){var e=new v.WebGLRenderTarget(j,j),r=new v.WebGLRenderTarget(j,j);r.texture.generateMipmaps=e.texture.generateMipmaps=!1;var t=new v.PlaneBufferGeometry(y,U).rotateX(Math.PI/2),i=new v.Mesh(t),a=new v.MeshDepthMaterial;a.depthTest=a.depthWrite=!1,a.onBeforeCompile=function(e){e.uniforms=(0,n.Z)((0,n.Z)({},e.uniforms),{},{ucolor:{value:new v.Color(Z).convertSRGBToLinear()}}),e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor, ( 1.0 - fragCoordZ ) * 1.0 );")};var u=new v.ShaderMaterial(c),o=new v.ShaderMaterial(f);return o.depthTest=u.depthTest=!1,[e,t,a,i,u,o,r]}),[j,y,U,d,Z]),F=(0,i.Z)(_,7),O=F[0],z=F[1],I=F[2],V=F[3],H=F[4],X=F[5],q=F[6],J=function(e){V.visible=!0,V.material=H,H.uniforms.tDiffuse.value=O.texture,H.uniforms.h.value=1*e/256,A.setRenderTarget(q),A.render(V,P.current),V.material=X,X.uniforms.tDiffuse.value=q.texture,X.uniforms.v.value=1*e/256,A.setRenderTarget(O),A.render(V,P.current),V.visible=!1},K=0;return(0,s.x)((function(){if(P.current&&(h===1/0||K<h)){var e=W.background;W.background=null;var r=W.overrideMaterial;W.overrideMaterial=I,A.setRenderTarget(O),A.render(W,P.current),W.overrideMaterial=r,J(M),R&&J(.4*M),A.setRenderTarget(null),W.background=e,K++}})),o.createElement("group",(0,u.Z)({"rotation-x":Math.PI/2},G,{ref:r}),o.createElement("mesh",{renderOrder:B,geometry:z,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},o.createElement("meshBasicMaterial",{map:O.texture,"map-encoding":A.outputEncoding,transparent:!0,opacity:p,depthWrite:L})),o.createElement("orthographicCamera",{ref:P,args:[-y/2,y/2,U/2,-U/2,0,S]}))}))},9142:function(e,r,t){t.d(r,{H:function(){return d}});var n=t(9439),i=t(4925),a=t(7462),u=t(2791),o=t(7760),v=t(1690),s=t(9292),c=t(8202),f=["children","controls","shadows","adjustCamera","environment","intensity","preset","shadowBias","contactShadow"],l={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function d(e){var r=e.children,t=e.controls,d=e.shadows,m=void 0===d||d,h=e.adjustCamera,x=void 0===h||h,p=e.environment,g=void 0===p?"city":p,y=e.intensity,D=void 0===y?1:y,U=e.preset,w=void 0===U?"rembrandt":U,M=e.shadowBias,b=void 0===M?0:M,S=e.contactShadow,E=void 0===S?{blur:2,opacity:.5,position:[0,0,0]}:S,j=(0,i.Z)(e,f),C=l[w],R=(0,v.w)((function(e){return e.camera})),T=(0,v.w)((function(e){return e.controls})),Z=u.useRef(null),k=u.useRef(null),L=u.useState({radius:0,width:0,height:0}),B=(0,n.Z)(L,2),G=B[0],W=G.radius,A=G.width,P=G.height,_=B[1];return u.useLayoutEffect((function(){Z.current.position.set(0,0,0),Z.current.updateWorldMatrix(!0,!0);var e=(new o.Box3).setFromObject(k.current),r=new o.Vector3,t=new o.Sphere,n=e.max.y-e.min.y,i=e.max.x-e.min.x;e.getCenter(r),e.getBoundingSphere(t),_({radius:t.radius,width:i,height:n}),Z.current.position.set(-r.x,-r.y+n/2,-r.z)}),[r]),u.useLayoutEffect((function(){if(x){var e=W/(P>A?1.5:2.5);R.position.set(0,.5*W,2.5*W),R.near=.1,R.far=Math.max(5e3,4*W),R.lookAt(0,e,0);var r=T||(null==t?void 0:t.current);r&&(r.target.set(0,e,0),r.update())}}),[T,W,P,A,x]),u.createElement("group",j,u.createElement("group",{ref:Z},u.createElement("group",{ref:k},r)),E&&u.createElement(c.j,(0,a.Z)({scale:2*W,far:W/2},E)),g&&u.createElement(s.qA,{preset:g}),u.createElement("ambientLight",{intensity:D/3}),u.createElement("spotLight",{penumbra:1,position:[C.main[0]*W,C.main[1]*W,C.main[2]*W],intensity:2*D,castShadow:m,"shadow-bias":b}),u.createElement("pointLight",{position:[C.fill[0]*W,C.fill[1]*W,C.fill[2]*W],intensity:D}))}}}]);
//# sourceMappingURL=890.491cf3d5.chunk.js.map