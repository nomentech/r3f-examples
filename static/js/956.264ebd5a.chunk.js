"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[956],{9956:function(e,t,r){r.r(t),r.d(t,{default:function(){return C}});var n=r(1413),o=r(9439),a=r(2791),i=r(4647),s=r(2794),c=r(4925),u=r(7462),l=r(1250),d=r(7760),f=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],p=new d.Vector3,m=new d.Vector3,h=new d.Vector3;function x(e,t,r){var n=p.setFromMatrixPosition(e.matrixWorld);n.project(t);var o=r.width/2,a=r.height/2;return[n.x*o+o,-n.y*a+a]}var v=function(e){return Math.abs(e)<1e-10?0:e};function y(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="matrix3d(",o=0;16!==o;o++)n+=v(t[o]*e.elements[o])+(15!==o?",":")");return r+n}var g,M=(g=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],function(e){return y(e,g)}),w=function(e,t){return y(e,[1/(r=t),1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1],"translate(-50%,-50%)");var r},j=a.forwardRef((function(e,t){var r,i=e.children,y=e.eps,g=void 0===y?.001:y,j=e.style,b=e.className,E=e.prepend,P=e.center,W=e.fullscreen,C=e.portal,F=e.distanceFactor,R=e.sprite,z=void 0!==R&&R,Z=e.transform,I=void 0!==Z&&Z,N=e.occlude,O=e.onOcclude,S=e.zIndexRange,T=void 0===S?[16777271,0]:S,k=e.calculatePosition,L=void 0===k?x:k,A=e.as,V=void 0===A?"div":A,G=e.wrapperClass,_=e.pointerEvents,D=void 0===_?"auto":_,X=(0,c.Z)(e,f),q=(0,s.w)((function(e){return e.gl})),B=(0,s.w)((function(e){return e.camera})),H=(0,s.w)((function(e){return e.scene})),J=(0,s.w)((function(e){return e.size})),K=(0,s.w)((function(e){return e.raycaster})),Q=a.useState((function(){return document.createElement(V)})),U=(0,o.Z)(Q,1)[0],Y=a.useMemo((function(){return l.createRoot(U)}),[U]),$=a.useRef(null),ee=a.useRef(0),te=a.useRef([0,0]),re=a.useRef(null),ne=a.useRef(null),oe=null!==(r=null==C?void 0:C.current)&&void 0!==r?r:q.domElement.parentNode;a.useEffect((function(){if($.current){if(H.updateMatrixWorld(),I)U.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{var e=L($.current,B,J);U.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return oe&&(E?oe.prepend(U):oe.appendChild(U)),function(){oe&&oe.removeChild(U),Y.unmount()}}}),[oe,I]),a.useLayoutEffect((function(){G&&(U.className=G)}),[G]);var ae=a.useMemo((function(){return I?{position:"absolute",top:0,left:0,width:J.width,height:J.height,transformStyle:"preserve-3d",pointerEvents:"none"}:(0,n.Z)((0,n.Z)({position:"absolute",transform:P?"translate3d(-50%,-50%,0)":"none"},W&&{top:-J.height/2,left:-J.width/2,width:J.width,height:J.height}),j)}),[j,P,W,J,I]),ie=a.useMemo((function(){return{position:"absolute",pointerEvents:D}}),[D]);a.useLayoutEffect((function(){I?Y.render(a.createElement("div",{ref:re,style:ae},a.createElement("div",{ref:ne,style:ie},a.createElement("div",{ref:t,className:b,style:j,children:i})))):Y.render(a.createElement("div",{ref:t,style:ae,className:b,children:i}))}));var se=a.useRef(!0);return(0,s.x)((function(){if($.current){B.updateMatrixWorld(),$.current.updateWorldMatrix(!0,!1);var e=I?te.current:L($.current,B,J);if(I||Math.abs(ee.current-B.zoom)>g||Math.abs(te.current[0]-e[0])>g||Math.abs(te.current[1]-e[1])>g){var t=function(e,t){var r=p.setFromMatrixPosition(e.matrixWorld),n=m.setFromMatrixPosition(t.matrixWorld),o=r.sub(n),a=t.getWorldDirection(h);return o.angleTo(a)>Math.PI/2}($.current,B),r=!1;"boolean"===typeof N?!0===N&&(r=[H]):Array.isArray(N)&&(r=N.map((function(e){return e.current})));var n=se.current;if(r){var o=function(e,t,r,n){var o=p.setFromMatrixPosition(e.matrixWorld),a=o.clone();a.project(t),r.setFromCamera(a,t);var i=r.intersectObjects(n,!0);if(i.length){var s=i[0].distance;return o.distanceTo(r.ray.origin)<s}return!0}($.current,B,K,r);se.current=o&&!t}else se.current=!t;if(n!==se.current&&(O?O(!se.current):U.style.display=se.current?"block":"none"),U.style.zIndex="".concat(function(e,t,r){if(t instanceof d.PerspectiveCamera||t instanceof d.OrthographicCamera){var n=p.setFromMatrixPosition(e.matrixWorld),o=m.setFromMatrixPosition(t.matrixWorld),a=n.distanceTo(o),i=(r[1]-r[0])/(t.far-t.near),s=r[1]-i*t.far;return Math.round(i*a+s)}}($.current,B,T)),I){var a=J.width/2,i=J.height/2,s=B.projectionMatrix.elements[5]*i,c=B.isOrthographicCamera,u=B.top,l=B.left,f=B.bottom,x=B.right,y=M(B.matrixWorldInverse),j=c?"scale(".concat(s,")translate(").concat(v(-(x+l)/2),"px,").concat(v((u+f)/2),"px)"):"translateZ(".concat(s,"px)"),b=$.current.matrixWorld;z&&((b=B.matrixWorldInverse.clone().transpose().copyPosition(b).scale($.current.scale)).elements[3]=b.elements[7]=b.elements[11]=0,b.elements[15]=1),U.style.width=J.width+"px",U.style.height=J.height+"px",U.style.perspective=c?"":"".concat(s,"px"),re.current&&ne.current&&(re.current.style.transform="".concat(j).concat(y,"translate(").concat(a,"px,").concat(i,"px)"),ne.current.style.transform=w(b,1/((F||10)/400)))}else{var E=void 0===F?1:function(e,t){if(t instanceof d.OrthographicCamera)return t.zoom;if(t instanceof d.PerspectiveCamera){var r=p.setFromMatrixPosition(e.matrixWorld),n=m.setFromMatrixPosition(t.matrixWorld),o=t.fov*Math.PI/180,a=r.distanceTo(n);return 1/(2*Math.tan(o/2)*a)}return 1}($.current,B)*F;U.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(E,")")}te.current=e,ee.current=B.zoom}}})),a.createElement("group",(0,u.Z)({},X,{ref:$}))})),b=r(3520),E=r(184),P=function(){var e=(0,a.useState)(2),t=(0,o.Z)(e,2),r=t[0],n=t[1],i=(0,a.useState)(!1),s=(0,o.Z)(i,2),c=s[0],u=s[1];return(0,E.jsxs)("mesh",{scale:.5*r,children:[(0,E.jsx)("boxGeometry",{}),(0,E.jsx)("meshStandardMaterial",{}),(0,E.jsxs)(j,{style:{transition:"all 0.2s",opacity:c?0:1,transform:"scale(".concat(c?.5:1,")")},distanceFactor:1.5,position:[0,0,.51],transform:!0,occlude:!0,onOcclude:function(e){return u(e),null},children:[(0,E.jsx)("span",{children:"Size: "}),(0,E.jsx)("input",{type:"number",value:r,onChange:function(e){return n(e.target.valueAsNumber)}})]})]})},W=function(e){var t=(0,a.useRef)();return(0,s.x)((function(e){return t.current.position.x=Math.sin(e.clock.getElapsedTime())})),(0,E.jsxs)("mesh",(0,n.Z)((0,n.Z)({ref:t},e),{},{children:[(0,E.jsx)("sphereGeometry",{args:[.3,32,32]}),(0,E.jsx)("meshStandardMaterial",{color:"orange"})]}))},C=function(e){var t=e.children;return(0,E.jsxs)(E.Fragment,{children:[t,(0,E.jsxs)(i.Xz,{dpr:[1,2],camera:{fov:25},children:[(0,E.jsx)("ambientLight",{intensity:.5}),(0,E.jsx)("pointLight",{position:[10,10,5]}),(0,E.jsx)("pointLight",{position:[-10,-10,-10]}),(0,E.jsx)(P,{}),(0,E.jsx)(W,{position:[0,0,1]}),(0,E.jsx)(b.z,{})]})]})}}}]);
//# sourceMappingURL=956.264ebd5a.chunk.js.map