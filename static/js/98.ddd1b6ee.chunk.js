"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[98],{4098:function(e,t,r){r.r(t),r.d(t,{default:function(){return M}});var n=r(1413),a=r(4925),o=r(2791),i=r(4647),u=r(9439),s=r(7760),c=r(7219),v=function(e){return e&&e.isOrthographicCamera},m=o.createContext(null);function f(e){var t=e.children,r=e.damping,n=void 0===r?6:r,a=e.fit,i=e.clip,f=e.observe,l=e.margin,d=void 0===l?1.2:l,x=e.eps,p=void 0===x?.01:x,h=e.onFit,g=o.useRef(null),y=(0,c.w)(),D=y.camera,M=y.invalidate,U=y.size,z=y.controls,w=o.useRef(h);function b(e,t){return Math.abs(e.x-t.x)<p&&Math.abs(e.y-t.y)<p&&Math.abs(e.z-t.z)<p}function j(e,t,r,n){e.x=s.MathUtils.damp(e.x,t.x,r,n),e.y=s.MathUtils.damp(e.y,t.y,r,n),e.z=s.MathUtils.damp(e.z,t.z,r,n)}w.current=h;var S=o.useState((function(){return{animating:!1,focus:new s.Vector3,camera:new s.Vector3,zoom:1}})),V=(0,u.Z)(S,1)[0],C=o.useState((function(){return{focus:new s.Vector3,camera:new s.Vector3,zoom:1}})),P=(0,u.Z)(C,1)[0],k=o.useState((function(){return new s.Box3})),R=(0,u.Z)(k,1)[0],Z=o.useMemo((function(){function e(){var e=R.getSize(new s.Vector3),t=R.getCenter(new s.Vector3),r=Math.max(e.x,e.y,e.z),n=v(D)?4*r:r/(2*Math.atan(Math.PI*D.fov/360)),a=v(D)?4*r:n/D.aspect,o=d*Math.max(n,a);return{box:R,size:e,center:t,distance:o}}return{getSize:e,refresh:function(t){if((n=t)&&n.isBox3)R.copy(t);else{var r=t||g.current;r.updateWorldMatrix(!0,!0),R.setFromObject(r)}var n;if(R.isEmpty()){var a=D.position.length()||10;R.setFromCenterAndSize(new s.Vector3,new s.Vector3(a,a,a))}if("OrthographicTrackballControls"===(null==z?void 0:z.constructor.name)){var o=e().distance,i=D.position.clone().sub(z.target).normalize().multiplyScalar(o),u=z.target.clone().add(i);D.position.copy(u)}return this},clip:function(){var t=e().distance;return z&&(z.maxDistance=10*t),D.near=t/100,D.far=100*t,D.updateProjectionMatrix(),z&&z.update(),M(),this},fit:function(){V.camera.copy(D.position),z&&V.focus.copy(z.target);var t=e(),r=t.center,a=t.distance,o=r.clone().sub(D.position).normalize().multiplyScalar(a);if(P.camera.copy(r).sub(o),P.focus.copy(r),v(D)){V.zoom=D.zoom;var i=0,u=0,c=[new s.Vector3(R.min.x,R.min.y,R.min.z),new s.Vector3(R.min.x,R.max.y,R.min.z),new s.Vector3(R.min.x,R.min.y,R.max.z),new s.Vector3(R.min.x,R.max.y,R.max.z),new s.Vector3(R.max.x,R.max.y,R.max.z),new s.Vector3(R.max.x,R.max.y,R.min.z),new s.Vector3(R.max.x,R.min.y,R.max.z),new s.Vector3(R.max.x,R.min.y,R.min.z)];r.applyMatrix4(D.matrixWorldInverse);for(var m=0,f=c;m<f.length;m++){var l=f[m];l.applyMatrix4(D.matrixWorldInverse),i=Math.max(i,Math.abs(l.y-r.y)),u=Math.max(u,Math.abs(l.x-r.x))}i*=2,u*=2;var x=(D.top-D.bottom)/i,p=(D.right-D.left)/u;P.zoom=Math.min(x,p)/d,n||(D.zoom=P.zoom,D.updateProjectionMatrix())}return n?V.animating=!0:(D.position.copy(P.camera),D.lookAt(P.focus),z&&(z.target.copy(P.focus),z.update())),w.current&&w.current(this.getSize()),M(),this}}}),[R,D,z,d,n,M]);o.useLayoutEffect((function(){if(z){var e=function(){return V.animating=!1};return z.addEventListener("start",e),function(){return z.removeEventListener("start",e)}}}),[z]);var E=o.useRef(0);return o.useLayoutEffect((function(){(f||0===E.current++)&&(Z.refresh(),a&&Z.fit(),i&&Z.clip())}),[U,i,a,f,D,z]),(0,c.x)((function(e,t){if(V.animating){if(j(V.focus,P.focus,n,t),j(V.camera,P.camera,n,t),V.zoom=s.MathUtils.damp(V.zoom,P.zoom,n,t),D.position.copy(V.camera),v(D)&&(D.zoom=V.zoom,D.updateProjectionMatrix()),z?(z.target.copy(V.focus),z.update()):D.lookAt(V.focus),M(),v(D)&&!(Math.abs(V.zoom-P.zoom)<p))return;if(!v(D)&&!b(V.camera,P.camera))return;if(z&&!b(V.focus,P.focus))return;V.animating=!1}})),o.createElement("group",{ref:g},o.createElement(m.Provider,{value:Z},t))}var l=r(3655),d=r(8202),x=r(3520),p=r(127),h=r(184),g=["name"],y=function(e){var t=e.name,r=(0,a.Z)(e,g),o=(0,l.L)(p).nodes;return(0,h.jsx)("mesh",(0,n.Z)((0,n.Z)({geometry:o[t].geometry,material:o[t].material,"material-emissive":"red","material-roughness":1},r),{},{dispose:null}))},D=function(e){var t=e.children,r=o.useContext(m);return(0,h.jsx)("group",{onClick:function(e){e.stopPropagation(),e.delta<=2&&r.refresh(e.object).fit()},onPointerMissed:function(e){return 0===e.button&&r.refresh().fit()},children:t})},M=function(e){var t=e.children;return(0,h.jsxs)(h.Fragment,{children:[t,(0,h.jsxs)(i.Xz,{camera:{position:[0,-10,80],fov:50},dpr:[1,2],children:[(0,h.jsx)("spotLight",{position:[-100,-100,-100],intensity:.2,angle:.3,penumbra:1}),(0,h.jsx)("hemisphereLight",{color:"white",groundColor:"#ff0f00",position:[-7,25,13],intensity:1}),(0,h.jsxs)(o.Suspense,{fallback:null,children:[(0,h.jsx)(f,{fit:!0,clip:!0,margin:1.2,children:(0,h.jsxs)(D,{children:[(0,h.jsx)(y,{name:"Curly",position:[1,-11,-20],rotation:[2,0,0]}),(0,h.jsx)(y,{name:"DNA",position:[20,0,-17],rotation:[1,1,-2]}),(0,h.jsx)(y,{name:"Headphones",position:[20,2,4],rotation:[1,0,-1]}),(0,h.jsx)(y,{name:"Notebook",position:[-21,-15,-13],rotation:[2,0,1]}),(0,h.jsx)(y,{name:"Rocket003",position:[18,15,-25],rotation:[1,1,0]}),(0,h.jsx)(y,{name:"Roundcube001",position:[-25,-4,5],rotation:[1,0,0],scale:.5}),(0,h.jsx)(y,{name:"Table",position:[1,-4,-28],rotation:[1,0,-1],scale:.5}),(0,h.jsx)(y,{name:"VR_Headset",position:[7,-15,28],rotation:[1,0,-1],scale:5}),(0,h.jsx)(y,{name:"Zeppelin",position:[-20,10,10],rotation:[3,-1,3],scale:.005})]})}),(0,h.jsx)(d.j,{"rotation-x":Math.PI/2,position:[0,-35,0],opacity:.2,width:200,height:200,blur:1,far:50})]}),(0,h.jsx)(x.z,{makeDefault:!0,minPolarAngle:0,maxPolarAngle:Math.PI/1.75})]})]})}},8202:function(e,t,r){r.d(t,{j:function(){return l}});var n=r(1413),a=r(9439),o=r(4925),i=r(7462),u=r(2791),s=r(7760),c=r(7219),v={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},m={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},f=["scale","frames","opacity","width","height","blur","far","resolution","smooth","color","depthWrite","renderOrder"],l=u.forwardRef((function(e,t){var r=e.scale,l=void 0===r?10:r,d=e.frames,x=void 0===d?1/0:d,p=e.opacity,h=void 0===p?1:p,g=e.width,y=void 0===g?1:g,D=e.height,M=void 0===D?1:D,U=e.blur,z=void 0===U?1:U,w=e.far,b=void 0===w?10:w,j=e.resolution,S=void 0===j?512:j,V=e.smooth,C=void 0===V||V,P=e.color,k=void 0===P?"#000000":P,R=e.depthWrite,Z=void 0!==R&&R,E=e.renderOrder,T=(0,o.Z)(e,f),A=(0,c.w)((function(e){return e.scene})),L=(0,c.w)((function(e){return e.gl})),W=u.useRef(null);y*=Array.isArray(l)?l[0]:l||1,M*=Array.isArray(l)?l[1]:l||1;var I=u.useMemo((function(){var e=new s.WebGLRenderTarget(S,S),t=new s.WebGLRenderTarget(S,S);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;var r=new s.PlaneBufferGeometry(y,M).rotateX(Math.PI/2),a=new s.Mesh(r),o=new s.MeshDepthMaterial;o.depthTest=o.depthWrite=!1,o.onBeforeCompile=function(e){e.uniforms=(0,n.Z)((0,n.Z)({},e.uniforms),{},{ucolor:{value:new s.Color(k).convertSRGBToLinear()}}),e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor, ( 1.0 - fragCoordZ ) * 1.0 );")};var i=new s.ShaderMaterial(v),u=new s.ShaderMaterial(m);return u.depthTest=i.depthTest=!1,[e,r,o,a,i,u,t]}),[S,y,M,l,k]),_=(0,a.Z)(I,7),B=_[0],F=_[1],O=_[2],G=_[3],H=_[4],N=_[5],X=_[6],q=function(e){G.visible=!0,G.material=H,H.uniforms.tDiffuse.value=B.texture,H.uniforms.h.value=1*e/256,L.setRenderTarget(X),L.render(G,W.current),G.material=N,N.uniforms.tDiffuse.value=X.texture,N.uniforms.v.value=1*e/256,L.setRenderTarget(B),L.render(G,W.current),G.visible=!1},J=0;return(0,c.x)((function(){if(W.current&&(x===1/0||J<x)){var e=A.background;A.background=null;var t=A.overrideMaterial;A.overrideMaterial=O,L.setRenderTarget(B),L.render(A,W.current),A.overrideMaterial=t,q(z),C&&q(.4*z),L.setRenderTarget(null),A.background=e,J++}})),u.createElement("group",(0,i.Z)({"rotation-x":Math.PI/2},T,{ref:t}),u.createElement("mesh",{renderOrder:E,geometry:F,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},u.createElement("meshBasicMaterial",{map:B.texture,"map-encoding":L.outputEncoding,transparent:!0,opacity:h,depthWrite:Z})),u.createElement("orthographicCamera",{ref:W,args:[-y/2,y/2,M/2,-M/2,0,b]}))}))},127:function(e,t,r){e.exports=r.p+"static/media/compressed.9d646d8f6c772acb56c9.glb"}}]);
//# sourceMappingURL=98.ddd1b6ee.chunk.js.map