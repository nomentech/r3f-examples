"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[33],{6959:function(e,t,r){r.r(t),r.d(t,{default:function(){return x}});var n=r(2791),a=r(4647),i=r(1690);function o(){var e=(0,i.w)((function(e){return e.gl}));return(0,n.useEffect)((function(){return e.shadowMap.autoUpdate=!1,e.shadowMap.needsUpdate=!0,function(){e.shadowMap.autoUpdate=e.shadowMap.needsUpdate=!0}}),[e.shadowMap]),null}var s=r(9142),v=r(4637),u=r(1413),c=r(4925),m=r(7760),l=r(3655),d=r.p+"static/media/shoe.175d5ebc5d5e54e1ddff.gltf",f=r(184),h=["color"];l.L.preload(d);var p=function(e){var t=e.color,r=(0,c.Z)(e,h),n=(0,l.L)(d),a=n.nodes,i=n.materials;return(0,f.jsxs)("group",(0,u.Z)((0,u.Z)({},r),{},{dispose:null,children:[(0,f.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:a.shoe.geometry,material:i.laces,"material-envMapIntensity":.8}),(0,f.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:a.shoe_1.geometry,children:(0,f.jsx)("meshStandardMaterial",{color:t,aoMap:i.mesh.aoMap,normalMap:i.mesh.normalMap,"normalMap-encoding":m.LinearEncoding,roughnessMap:i.mesh.roughnessMap,metalnessMap:i.mesh.metalnessMap,envMapIntensity:.8})}),(0,f.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:a.shoe_2.geometry,material:i.caps,"material-envMapIntensity":.8}),(0,f.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:a.shoe_3.geometry,material:i.inner,"material-envMapIntensity":.8}),(0,f.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:a.shoe_4.geometry,material:i.sole,"material-envMapIntensity":.8}),(0,f.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:a.shoe_5.geometry,material:i.stripes,"material-envMapIntensity":.8}),(0,f.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:a.shoe_6.geometry,material:i.band,"material-envMapIntensity":.8}),(0,f.jsx)("mesh",{castShadow:!0,receiveShadow:!0,geometry:a.shoe_7.geometry,material:i.patch,"material-envMapIntensity":.8})]}))},x=function(e){var t=e.children;return(0,f.jsxs)(f.Fragment,{children:[t,(0,f.jsxs)(a.Xz,{shadows:!0,dpr:[1,2],camera:{position:[0,0,150],fov:40},children:[(0,f.jsxs)(n.Suspense,{fallback:null,children:[(0,f.jsxs)(s.H,{environment:"city",intensity:.6,children:[(0,f.jsx)(p,{color:"tomato",position:[0,0,0]}),(0,f.jsx)(p,{color:"orange",scale:-1,rotation:[0,.5,Math.PI],position:[0,0,-2]})]}),(0,f.jsx)(o,{})]}),(0,f.jsx)(v.z,{autoRotate:!0})]})]})}},8202:function(e,t,r){r.d(t,{j:function(){return d}});var n=r(1413),a=r(9439),i=r(4925),o=r(7462),s=r(2791),v=r(7760),u=r(1690),c={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},m={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},l=["scale","frames","opacity","width","height","blur","far","resolution","smooth","color","depthWrite","renderOrder"],d=s.forwardRef((function(e,t){var r=e.scale,d=void 0===r?10:r,f=e.frames,h=void 0===f?1/0:f,p=e.opacity,x=void 0===p?1:p,g=e.width,y=void 0===g?1:g,w=e.height,U=void 0===w?1:w,D=e.blur,M=void 0===D?1:D,S=e.far,j=void 0===S?10:S,b=e.resolution,E=void 0===b?512:b,Z=e.smooth,_=void 0===Z||Z,C=e.color,I=void 0===C?"#000000":C,R=e.depthWrite,L=void 0!==R&&R,T=e.renderOrder,k=(0,i.Z)(e,l),B=(0,u.w)((function(e){return e.scene})),P=(0,u.w)((function(e){return e.gl})),W=s.useRef(null);y*=Array.isArray(d)?d[0]:d||1,U*=Array.isArray(d)?d[1]:d||1;var A=s.useMemo((function(){var e=new v.WebGLRenderTarget(E,E),t=new v.WebGLRenderTarget(E,E);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;var r=new v.PlaneBufferGeometry(y,U).rotateX(Math.PI/2),a=new v.Mesh(r),i=new v.MeshDepthMaterial;i.depthTest=i.depthWrite=!1,i.onBeforeCompile=function(e){e.uniforms=(0,n.Z)((0,n.Z)({},e.uniforms),{},{ucolor:{value:new v.Color(I).convertSRGBToLinear()}}),e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor, ( 1.0 - fragCoordZ ) * 1.0 );")};var o=new v.ShaderMaterial(c),s=new v.ShaderMaterial(m);return s.depthTest=o.depthTest=!1,[e,r,i,a,o,s,t]}),[E,y,U,d,I]),F=(0,a.Z)(A,7),G=F[0],O=F[1],z=F[2],V=F[3],H=F[4],X=F[5],q=F[6],J=function(e){V.visible=!0,V.material=H,H.uniforms.tDiffuse.value=G.texture,H.uniforms.h.value=1*e/256,P.setRenderTarget(q),P.render(V,W.current),V.material=X,X.uniforms.tDiffuse.value=q.texture,X.uniforms.v.value=1*e/256,P.setRenderTarget(G),P.render(V,W.current),V.visible=!1},K=0;return(0,u.x)((function(){if(W.current&&(h===1/0||K<h)){var e=B.background;B.background=null;var t=B.overrideMaterial;B.overrideMaterial=z,P.setRenderTarget(G),P.render(B,W.current),B.overrideMaterial=t,J(M),_&&J(.4*M),P.setRenderTarget(null),B.background=e,K++}})),s.createElement("group",(0,o.Z)({"rotation-x":Math.PI/2},k,{ref:t}),s.createElement("mesh",{renderOrder:T,geometry:O,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},s.createElement("meshBasicMaterial",{map:G.texture,"map-encoding":P.outputEncoding,transparent:!0,opacity:x,depthWrite:L})),s.createElement("orthographicCamera",{ref:W,args:[-y/2,y/2,U/2,-U/2,0,j]}))}))},9142:function(e,t,r){r.d(t,{H:function(){return d}});var n=r(9439),a=r(4925),i=r(7462),o=r(2791),s=r(7760),v=r(1690),u=r(9292),c=r(8202),m=["children","controls","shadows","adjustCamera","environment","intensity","preset","shadowBias","contactShadow"],l={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function d(e){var t=e.children,r=e.controls,d=e.shadows,f=void 0===d||d,h=e.adjustCamera,p=void 0===h||h,x=e.environment,g=void 0===x?"city":x,y=e.intensity,w=void 0===y?1:y,U=e.preset,D=void 0===U?"rembrandt":U,M=e.shadowBias,S=void 0===M?0:M,j=e.contactShadow,b=void 0===j?{blur:2,opacity:.5,position:[0,0,0]}:j,E=(0,a.Z)(e,m),Z=l[D],_=(0,v.w)((function(e){return e.camera})),C=(0,v.w)((function(e){return e.controls})),I=o.useRef(null),R=o.useRef(null),L=o.useState({radius:0,width:0,height:0}),T=(0,n.Z)(L,2),k=T[0],B=k.radius,P=k.width,W=k.height,A=T[1];return o.useLayoutEffect((function(){I.current.position.set(0,0,0),I.current.updateWorldMatrix(!0,!0);var e=(new s.Box3).setFromObject(R.current),t=new s.Vector3,r=new s.Sphere,n=e.max.y-e.min.y,a=e.max.x-e.min.x;e.getCenter(t),e.getBoundingSphere(r),A({radius:r.radius,width:a,height:n}),I.current.position.set(-t.x,-t.y+n/2,-t.z)}),[t]),o.useLayoutEffect((function(){if(p){var e=B/(W>P?1.5:2.5);_.position.set(0,.5*B,2.5*B),_.near=.1,_.far=Math.max(5e3,4*B),_.lookAt(0,e,0);var t=C||(null==r?void 0:r.current);t&&(t.target.set(0,e,0),t.update())}}),[C,B,W,P,p]),o.createElement("group",E,o.createElement("group",{ref:I},o.createElement("group",{ref:R},t)),b&&o.createElement(c.j,(0,i.Z)({scale:2*B,far:B/2},b)),g&&o.createElement(u.qA,{preset:g}),o.createElement("ambientLight",{intensity:w/3}),o.createElement("spotLight",{penumbra:1,position:[Z.main[0]*B,Z.main[1]*B,Z.main[2]*B],intensity:2*w,castShadow:f,"shadow-bias":S}),o.createElement("pointLight",{position:[Z.fill[0]*B,Z.fill[1]*B,Z.fill[2]*B],intensity:w}))}}}]);
//# sourceMappingURL=33.c833855e.chunk.js.map