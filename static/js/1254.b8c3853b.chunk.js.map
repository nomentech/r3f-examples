{"version":3,"file":"static/js/1254.b8c3853b.chunk.js","mappings":"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","sources":["basic-examples/tying-canvas-to-scroll-offset/Example.tsx","../node_modules/@react-three/drei/web/Html.js"],"sourcesContent":["import { useRef, useState } from 'react'\nimport * as THREE from 'three'\nimport { Canvas, useFrame, useThree } from '@react-three/fiber'\nimport { Html } from '@react-three/drei'\n\nconst Box = ({ text, color, ...props }: any) => {\n  const [hovered, set] = useState(false)\n\n  return (\n    <mesh {...props} onPointerOver={() => set(true)} onPointerOut={() => set(false)}>\n      <boxGeometry args={[2, 2, 2]} />\n      <meshStandardMaterial color={hovered ? 'hotpink' : color} />\n      <Html position={[0, 0, 1]} className='pointer-events-none' center>\n        {text}\n      </Html>\n    </mesh>\n  )\n}\n\nconst ScrollContainer = ({ scroll, children }: any) => {\n  const { viewport } = useThree()\n  const group: any = useRef()\n  useFrame((_, delta) => {\n    group.current.position.y = THREE.MathUtils.damp(group.current.position.y, viewport.height * scroll.current, 4, delta)\n    // Or: group.current.position.lerp(vec.set(0, viewport.height * scroll.current, 0), 0.1)\n  })\n  return (\n    <group ref={group}>{ children }</group>\n  )\n}\n\nconst Scene = () => {\n  const viewport = useThree(state => state.viewport)\n\n  return (\n    <>\n      <Box text={<span>This is HTML</span>} color='aquamarine' />\n      <Box text={<h1>H1 caption</h1>} color='lightblue' position={[0, -viewport.height, 0]} />\n    </>\n  )\n}\n\nconst Example = ({ children }: any) => {\n  const scrollRef: any = useRef()\n  const scroll: any = useRef(0)\n\n  return (\n    <>\n      { children }\n      <Canvas \n        onCreated={(state: any) => state.events.connect(scrollRef.current)}\n        raycaster={{ \n          computeOffsets: \n          ({ clientX, clientY }: any) => ({ offsetX: clientX, offsetY: clientY}) } as any} >\n        <ambientLight />\n        <pointLight position={[10, 0, 10]} />\n        <ScrollContainer scroll={scroll}>\n          <Scene />\n        </ScrollContainer>\n      </Canvas>\n      <div\n        ref={scrollRef}\n        onScroll={(e: any) => \n          (scroll.current = e.target.scrollTop / (e.target.scrollHeight - e.target.clientHeight))}\n        className='absolute w-[100vw] h-[100vh] overflow-y-auto top-0 left-0'>\n        <div className='h-[200vh] pointer-events-none'></div>\n      </div>\n    </>\n  )\n}\n\nexport default Example","import _extends from '@babel/runtime/helpers/esm/extends';\nimport * as React from 'react';\nimport * as ReactDOM from 'react-dom/client';\nimport { Vector3, OrthographicCamera, PerspectiveCamera } from 'three';\nimport { useThree, useFrame } from '@react-three/fiber';\n\nconst v1 = new Vector3();\nconst v2 = new Vector3();\nconst v3 = new Vector3();\n\nfunction defaultCalculatePosition(el, camera, size) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  objectPos.project(camera);\n  const widthHalf = size.width / 2;\n  const heightHalf = size.height / 2;\n  return [objectPos.x * widthHalf + widthHalf, -(objectPos.y * heightHalf) + heightHalf];\n}\n\nfunction isObjectBehindCamera(el, camera) {\n  const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n  const deltaCamObj = objectPos.sub(cameraPos);\n  const camDir = camera.getWorldDirection(v3);\n  return deltaCamObj.angleTo(camDir) > Math.PI / 2;\n}\n\nfunction isObjectVisible(el, camera, raycaster, occlude) {\n  const elPos = v1.setFromMatrixPosition(el.matrixWorld);\n  const screenPos = elPos.clone();\n  screenPos.project(camera);\n  raycaster.setFromCamera(screenPos, camera);\n  const intersects = raycaster.intersectObjects(occlude, true);\n\n  if (intersects.length) {\n    const intersectionDistance = intersects[0].distance;\n    const pointDistance = elPos.distanceTo(raycaster.ray.origin);\n    return pointDistance < intersectionDistance;\n  }\n\n  return true;\n}\n\nfunction objectScale(el, camera) {\n  if (camera instanceof OrthographicCamera) {\n    return camera.zoom;\n  } else if (camera instanceof PerspectiveCamera) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const vFOV = camera.fov * Math.PI / 180;\n    const dist = objectPos.distanceTo(cameraPos);\n    const scaleFOV = 2 * Math.tan(vFOV / 2) * dist;\n    return 1 / scaleFOV;\n  } else {\n    return 1;\n  }\n}\n\nfunction objectZIndex(el, camera, zIndexRange) {\n  if (camera instanceof PerspectiveCamera || camera instanceof OrthographicCamera) {\n    const objectPos = v1.setFromMatrixPosition(el.matrixWorld);\n    const cameraPos = v2.setFromMatrixPosition(camera.matrixWorld);\n    const dist = objectPos.distanceTo(cameraPos);\n    const A = (zIndexRange[1] - zIndexRange[0]) / (camera.far - camera.near);\n    const B = zIndexRange[1] - A * camera.far;\n    return Math.round(A * dist + B);\n  }\n\n  return undefined;\n}\n\nconst epsilon = value => Math.abs(value) < 1e-10 ? 0 : value;\n\nfunction getCSSMatrix(matrix, multipliers, prepend = '') {\n  let matrix3d = 'matrix3d(';\n\n  for (let i = 0; i !== 16; i++) {\n    matrix3d += epsilon(multipliers[i] * matrix.elements[i]) + (i !== 15 ? ',' : ')');\n  }\n\n  return prepend + matrix3d;\n}\n\nconst getCameraCSSMatrix = (multipliers => {\n  return matrix => getCSSMatrix(matrix, multipliers);\n})([1, -1, 1, 1, 1, -1, 1, 1, 1, -1, 1, 1, 1, -1, 1, 1]);\n\nconst getObjectCSSMatrix = (scaleMultipliers => {\n  return (matrix, factor) => getCSSMatrix(matrix, scaleMultipliers(factor), 'translate(-50%,-50%)');\n})(f => [1 / f, 1 / f, 1 / f, 1, -1 / f, -1 / f, -1 / f, -1, 1 / f, 1 / f, 1 / f, 1, 1, 1, 1, 1]);\n\nconst Html = /*#__PURE__*/React.forwardRef(({\n  children,\n  eps = 0.001,\n  style,\n  className,\n  prepend,\n  center,\n  fullscreen,\n  portal,\n  distanceFactor,\n  sprite = false,\n  transform = false,\n  occlude,\n  onOcclude,\n  zIndexRange = [16777271, 0],\n  calculatePosition = defaultCalculatePosition,\n  as = 'div',\n  wrapperClass,\n  pointerEvents = 'auto',\n  ...props\n}, ref) => {\n  var _portal$current;\n\n  const gl = useThree(({\n    gl\n  }) => gl);\n  const camera = useThree(({\n    camera\n  }) => camera);\n  const scene = useThree(({\n    scene\n  }) => scene);\n  const size = useThree(({\n    size\n  }) => size);\n  const raycaster = useThree(({\n    raycaster\n  }) => raycaster);\n  const [el] = React.useState(() => document.createElement(as));\n  const root = React.useMemo(() => ReactDOM.createRoot(el), [el]);\n  const group = React.useRef(null);\n  const oldZoom = React.useRef(0);\n  const oldPosition = React.useRef([0, 0]);\n  const transformOuterRef = React.useRef(null);\n  const transformInnerRef = React.useRef(null);\n  const target = (_portal$current = portal == null ? void 0 : portal.current) !== null && _portal$current !== void 0 ? _portal$current : gl.domElement.parentNode;\n  React.useEffect(() => {\n    if (group.current) {\n      scene.updateMatrixWorld();\n\n      if (transform) {\n        el.style.cssText = `position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;`;\n      } else {\n        const vec = calculatePosition(group.current, camera, size);\n        el.style.cssText = `position:absolute;top:0;left:0;transform:translate3d(${vec[0]}px,${vec[1]}px,0);transform-origin:0 0;`;\n      }\n\n      if (target) {\n        if (prepend) target.prepend(el);else target.appendChild(el);\n      }\n\n      return () => {\n        if (target) target.removeChild(el);\n        root.unmount();\n      };\n    }\n  }, [target, transform]);\n  React.useLayoutEffect(() => {\n    if (wrapperClass) el.className = wrapperClass;\n  }, [wrapperClass]);\n  const styles = React.useMemo(() => {\n    if (transform) {\n      return {\n        position: 'absolute',\n        top: 0,\n        left: 0,\n        width: size.width,\n        height: size.height,\n        transformStyle: 'preserve-3d',\n        pointerEvents: 'none'\n      };\n    } else {\n      return {\n        position: 'absolute',\n        transform: center ? 'translate3d(-50%,-50%,0)' : 'none',\n        ...(fullscreen && {\n          top: -size.height / 2,\n          left: -size.width / 2,\n          width: size.width,\n          height: size.height\n        }),\n        ...style\n      };\n    }\n  }, [style, center, fullscreen, size, transform]);\n  const transformInnerStyles = React.useMemo(() => ({\n    position: 'absolute',\n    pointerEvents\n  }), [pointerEvents]);\n  React.useLayoutEffect(() => {\n    if (transform) {\n      root.render( /*#__PURE__*/React.createElement(\"div\", {\n        ref: transformOuterRef,\n        style: styles\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        ref: transformInnerRef,\n        style: transformInnerStyles\n      }, /*#__PURE__*/React.createElement(\"div\", {\n        ref: ref,\n        className: className,\n        style: style,\n        children: children\n      }))));\n    } else {\n      root.render( /*#__PURE__*/React.createElement(\"div\", {\n        ref: ref,\n        style: styles,\n        className: className,\n        children: children\n      }));\n    }\n  });\n  const visible = React.useRef(true);\n  useFrame(() => {\n    if (group.current) {\n      camera.updateMatrixWorld();\n      group.current.updateWorldMatrix(true, false);\n      const vec = transform ? oldPosition.current : calculatePosition(group.current, camera, size);\n\n      if (transform || Math.abs(oldZoom.current - camera.zoom) > eps || Math.abs(oldPosition.current[0] - vec[0]) > eps || Math.abs(oldPosition.current[1] - vec[1]) > eps) {\n        const isBehindCamera = isObjectBehindCamera(group.current, camera);\n        let raytraceTarget = false;\n\n        if (typeof occlude === 'boolean') {\n          if (occlude === true) {\n            raytraceTarget = [scene];\n          }\n        } else if (Array.isArray(occlude)) {\n          raytraceTarget = occlude.map(item => item.current);\n        }\n\n        const previouslyVisible = visible.current;\n\n        if (raytraceTarget) {\n          const isvisible = isObjectVisible(group.current, camera, raycaster, raytraceTarget);\n          visible.current = isvisible && !isBehindCamera;\n        } else {\n          visible.current = !isBehindCamera;\n        }\n\n        if (previouslyVisible !== visible.current) {\n          if (onOcclude) onOcclude(!visible.current);else el.style.display = visible.current ? 'block' : 'none';\n        }\n\n        el.style.zIndex = `${objectZIndex(group.current, camera, zIndexRange)}`;\n\n        if (transform) {\n          const [widthHalf, heightHalf] = [size.width / 2, size.height / 2];\n          const fov = camera.projectionMatrix.elements[5] * heightHalf;\n          const {\n            isOrthographicCamera,\n            top,\n            left,\n            bottom,\n            right\n          } = camera;\n          const cameraMatrix = getCameraCSSMatrix(camera.matrixWorldInverse);\n          const cameraTransform = isOrthographicCamera ? `scale(${fov})translate(${epsilon(-(right + left) / 2)}px,${epsilon((top + bottom) / 2)}px)` : `translateZ(${fov}px)`;\n          let matrix = group.current.matrixWorld;\n\n          if (sprite) {\n            matrix = camera.matrixWorldInverse.clone().transpose().copyPosition(matrix).scale(group.current.scale);\n            matrix.elements[3] = matrix.elements[7] = matrix.elements[11] = 0;\n            matrix.elements[15] = 1;\n          }\n\n          el.style.width = size.width + 'px';\n          el.style.height = size.height + 'px';\n          el.style.perspective = isOrthographicCamera ? '' : `${fov}px`;\n\n          if (transformOuterRef.current && transformInnerRef.current) {\n            transformOuterRef.current.style.transform = `${cameraTransform}${cameraMatrix}translate(${widthHalf}px,${heightHalf}px)`;\n            transformInnerRef.current.style.transform = getObjectCSSMatrix(matrix, 1 / ((distanceFactor || 10) / 400));\n          }\n        } else {\n          const scale = distanceFactor === undefined ? 1 : objectScale(group.current, camera) * distanceFactor;\n          el.style.transform = `translate3d(${vec[0]}px,${vec[1]}px,0) scale(${scale})`;\n        }\n\n        oldPosition.current = vec;\n        oldZoom.current = camera.zoom;\n      }\n    }\n  });\n  return /*#__PURE__*/React.createElement(\"group\", _extends({}, props, {\n    ref: group\n  }));\n});\n\nexport { Html };\n"],"names":["Box","text","color","props","useState","hovered","set","onPointerOver","onPointerOut","args","position","className","center","ScrollContainer","scroll","children","viewport","useThree","group","useRef","useFrame","_","delta","current","y","THREE","height","ref","Scene","state","scrollRef","onCreated","events","connect","raycaster","computeOffsets","offsetX","clientX","offsetY","clientY","onScroll","e","target","scrollTop","scrollHeight","clientHeight","v1","Vector3","v2","v3","defaultCalculatePosition","el","camera","size","objectPos","setFromMatrixPosition","matrixWorld","project","widthHalf","width","heightHalf","x","epsilon","value","Math","abs","getCSSMatrix","matrix","multipliers","prepend","matrix3d","i","elements","getCameraCSSMatrix","getObjectCSSMatrix","factor","f","Html","React","_portal$current","eps","style","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents","gl","scene","document","createElement","root","ReactDOM","oldZoom","oldPosition","transformOuterRef","transformInnerRef","domElement","parentNode","updateMatrixWorld","cssText","vec","appendChild","removeChild","unmount","styles","top","left","transformStyle","transformInnerStyles","render","visible","updateWorldMatrix","zoom","isBehindCamera","cameraPos","deltaCamObj","sub","camDir","getWorldDirection","angleTo","PI","isObjectBehindCamera","raytraceTarget","Array","isArray","map","item","previouslyVisible","isvisible","elPos","screenPos","clone","setFromCamera","intersects","intersectObjects","length","intersectionDistance","distance","distanceTo","ray","origin","isObjectVisible","display","zIndex","PerspectiveCamera","OrthographicCamera","dist","A","far","near","B","round","objectZIndex","fov","projectionMatrix","isOrthographicCamera","bottom","right","cameraMatrix","matrixWorldInverse","cameraTransform","transpose","copyPosition","scale","perspective","undefined","vFOV","tan","objectScale","_extends"],"sourceRoot":""}