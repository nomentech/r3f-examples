"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[209],{8819:function(e,t,r){r.r(t),r.d(t,{default:function(){return b}});var n=r(1413),o=r(4925),a=r(9439),i=r(2791),c=r(7760),s=r(4647),u=r(2794);function l(e){var t=e.all,r=e.scene,n=e.camera,o=(0,u.w)((function(e){return e.gl})),a=(0,u.w)((function(e){return e.camera})),s=(0,u.w)((function(e){return e.scene}));return i.useLayoutEffect((function(){var e=[];t&&(r||s).traverse((function(t){!1===t.visible&&(e.push(t),t.visible=!0)})),o.compile(r||s,n||a);var i=new c.WebGLCubeRenderTarget(128);new c.CubeCamera(.01,1e5,i).update(o,r||s),i.dispose(),e.forEach((function(e){return e.visible=!1}))}),[]),null}var f=r(4956),d=r(4637),m=r.p+"static/media/2294472375_24a3b8ef46_o.f98b93fae8690ffdf032.jpg",p=r.p+"static/media/Photosphere1.0c0b410e30a72f1ec11f.jpg",v=r(184),h=["link"],x=[{name:"outside",color:"lightpink",position:[10,0,-15],url:m,link:1},{name:"inside",color:"lightblue",position:[15,0,0],url:p,link:0}],g=function(e){var t=e.name,r=e.position,n=e.texture,o=e.onClick;return(0,v.jsxs)("group",{children:[(0,v.jsxs)("mesh",{children:[(0,v.jsx)("sphereBufferGeometry",{args:[500,60,40]}),(0,v.jsx)("meshBasicMaterial",{map:n,side:c.BackSide})]}),(0,v.jsxs)("mesh",{position:r,children:[(0,v.jsx)("sphereGeometry",{args:[1.25,32,32]}),(0,v.jsx)("meshBasicMaterial",{color:"white"}),(0,v.jsx)(f.V,{center:!0,children:(0,v.jsx)("div",{className:"cursor-pointer text-blue-500 text-sm",onClick:o,children:t})})]})]})},w=function(){var e=(0,i.useState)(0),t=(0,a.Z)(e,2),r=t[0],s=t[1],l=x[r],f=l.link,d=(0,o.Z)(l,h),m=(0,u.z)(c.TextureLoader,x.map((function(e){return e.url})));return(0,v.jsx)(g,(0,n.Z)((0,n.Z)({onClick:function(){return s(f)}},d),{},{texture:m[r]}))},b=function(e){var t=e.children;return(0,v.jsxs)(v.Fragment,{children:[t,(0,v.jsxs)(s.Xz,{frameloop:"demand",camera:{position:[0,0,.1]},children:[(0,v.jsx)(d.z,{enableZoom:!1,enablePan:!1,enableDamping:!0,dampingFactor:.2,autoRotate:!1,rotateSpeed:-.5}),(0,v.jsxs)(i.Suspense,{fallback:null,children:[(0,v.jsx)(l,{all:!0}),(0,v.jsx)(w,{})]})]})]})}},4637:function(e,t,r){r.d(t,{z:function(){return u}});var n=r(4925),o=r(7462),a=r(2794),i=r(2791),c=r(233),s=["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"],u=i.forwardRef((function(e,t){var r=e.makeDefault,u=e.camera,l=e.regress,f=e.domElement,d=e.enableDamping,m=void 0===d||d,p=e.onChange,v=e.onStart,h=e.onEnd,x=(0,n.Z)(e,s),g=(0,a.w)((function(e){return e.invalidate})),w=(0,a.w)((function(e){return e.camera})),b=(0,a.w)((function(e){return e.gl})),E=(0,a.w)((function(e){return e.events})),y=(0,a.w)((function(e){return e.set})),M=(0,a.w)((function(e){return e.get})),j=(0,a.w)((function(e){return e.performance})),C=u||w,k=f||E.connected||b.domElement,P=i.useMemo((function(){return new c.z(C)}),[C]);return(0,a.x)((function(){P.enabled&&P.update()}),-1),i.useEffect((function(){return P.connect(k),function(){P.dispose()}}),[k,l,P,g]),i.useEffect((function(){var e=function(e){g(),l&&j.regress(),p&&p(e)};return P.addEventListener("change",e),v&&P.addEventListener("start",v),h&&P.addEventListener("end",h),function(){v&&P.removeEventListener("start",v),h&&P.removeEventListener("end",h),P.removeEventListener("change",e)}}),[p,v,h]),i.useEffect((function(){if(r){var e=M().controls;return y({controls:P}),function(){return y({controls:e})}}}),[r,P]),i.createElement("primitive",(0,o.Z)({ref:t,object:P,enableDamping:m},x))}))},4956:function(e,t,r){r.d(t,{V:function(){return E}});var n=r(1413),o=r(9439),a=r(4925),i=r(7462),c=r(2791),s=r(1250),u=r(7760),l=r(2794),f=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],d=new u.Vector3,m=new u.Vector3,p=new u.Vector3;function v(e,t,r){var n=d.setFromMatrixPosition(e.matrixWorld);n.project(t);var o=r.width/2,a=r.height/2;return[n.x*o+o,-n.y*a+a]}var h=function(e){return Math.abs(e)<1e-10?0:e};function x(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="matrix3d(",o=0;16!==o;o++)n+=h(t[o]*e.elements[o])+(15!==o?",":")");return r+n}var g,w=(g=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],function(e){return x(e,g)}),b=function(e,t){return x(e,[1/(r=t),1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1],"translate(-50%,-50%)");var r},E=c.forwardRef((function(e,t){var r,x=e.children,g=e.eps,E=void 0===g?.001:g,y=e.style,M=e.className,j=e.prepend,C=e.center,k=e.fullscreen,P=e.portal,W=e.distanceFactor,F=e.sprite,R=void 0!==F&&F,Z=e.transform,z=void 0!==Z&&Z,L=e.occlude,S=e.onOcclude,T=e.zIndexRange,D=void 0===T?[16777271,0]:T,I=e.calculatePosition,N=void 0===I?v:I,O=e.as,V=void 0===O?"div":O,B=e.wrapperClass,_=e.pointerEvents,G=void 0===_?"auto":_,A=(0,a.Z)(e,f),X=(0,l.w)((function(e){return e.gl})),q=(0,l.w)((function(e){return e.camera})),H=(0,l.w)((function(e){return e.scene})),J=(0,l.w)((function(e){return e.size})),K=(0,l.w)((function(e){return e.raycaster})),Q=c.useState((function(){return document.createElement(V)})),U=(0,o.Z)(Q,1)[0],Y=c.useMemo((function(){return s.createRoot(U)}),[U]),$=c.useRef(null),ee=c.useRef(0),te=c.useRef([0,0]),re=c.useRef(null),ne=c.useRef(null),oe=null!==(r=null==P?void 0:P.current)&&void 0!==r?r:X.domElement.parentNode;c.useEffect((function(){if($.current){if(H.updateMatrixWorld(),z)U.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{var e=N($.current,q,J);U.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return oe&&(j?oe.prepend(U):oe.appendChild(U)),function(){oe&&oe.removeChild(U),Y.unmount()}}}),[oe,z]),c.useLayoutEffect((function(){B&&(U.className=B)}),[B]);var ae=c.useMemo((function(){return z?{position:"absolute",top:0,left:0,width:J.width,height:J.height,transformStyle:"preserve-3d",pointerEvents:"none"}:(0,n.Z)((0,n.Z)({position:"absolute",transform:C?"translate3d(-50%,-50%,0)":"none"},k&&{top:-J.height/2,left:-J.width/2,width:J.width,height:J.height}),y)}),[y,C,k,J,z]),ie=c.useMemo((function(){return{position:"absolute",pointerEvents:G}}),[G]);c.useLayoutEffect((function(){z?Y.render(c.createElement("div",{ref:re,style:ae},c.createElement("div",{ref:ne,style:ie},c.createElement("div",{ref:t,className:M,style:y,children:x})))):Y.render(c.createElement("div",{ref:t,style:ae,className:M,children:x}))}));var ce=c.useRef(!0);return(0,l.x)((function(){if($.current){q.updateMatrixWorld(),$.current.updateWorldMatrix(!0,!1);var e=z?te.current:N($.current,q,J);if(z||Math.abs(ee.current-q.zoom)>E||Math.abs(te.current[0]-e[0])>E||Math.abs(te.current[1]-e[1])>E){var t=function(e,t){var r=d.setFromMatrixPosition(e.matrixWorld),n=m.setFromMatrixPosition(t.matrixWorld),o=r.sub(n),a=t.getWorldDirection(p);return o.angleTo(a)>Math.PI/2}($.current,q),r=!1;"boolean"===typeof L?!0===L&&(r=[H]):Array.isArray(L)&&(r=L.map((function(e){return e.current})));var n=ce.current;if(r){var o=function(e,t,r,n){var o=d.setFromMatrixPosition(e.matrixWorld),a=o.clone();a.project(t),r.setFromCamera(a,t);var i=r.intersectObjects(n,!0);if(i.length){var c=i[0].distance;return o.distanceTo(r.ray.origin)<c}return!0}($.current,q,K,r);ce.current=o&&!t}else ce.current=!t;if(n!==ce.current&&(S?S(!ce.current):U.style.display=ce.current?"block":"none"),U.style.zIndex="".concat(function(e,t,r){if(t instanceof u.PerspectiveCamera||t instanceof u.OrthographicCamera){var n=d.setFromMatrixPosition(e.matrixWorld),o=m.setFromMatrixPosition(t.matrixWorld),a=n.distanceTo(o),i=(r[1]-r[0])/(t.far-t.near),c=r[1]-i*t.far;return Math.round(i*a+c)}}($.current,q,D)),z){var a=J.width/2,i=J.height/2,c=q.projectionMatrix.elements[5]*i,s=q.isOrthographicCamera,l=q.top,f=q.left,v=q.bottom,x=q.right,g=w(q.matrixWorldInverse),y=s?"scale(".concat(c,")translate(").concat(h(-(x+f)/2),"px,").concat(h((l+v)/2),"px)"):"translateZ(".concat(c,"px)"),M=$.current.matrixWorld;R&&((M=q.matrixWorldInverse.clone().transpose().copyPosition(M).scale($.current.scale)).elements[3]=M.elements[7]=M.elements[11]=0,M.elements[15]=1),U.style.width=J.width+"px",U.style.height=J.height+"px",U.style.perspective=s?"":"".concat(c,"px"),re.current&&ne.current&&(re.current.style.transform="".concat(y).concat(g,"translate(").concat(a,"px,").concat(i,"px)"),ne.current.style.transform=b(M,1/((W||10)/400)))}else{var j=void 0===W?1:function(e,t){if(t instanceof u.OrthographicCamera)return t.zoom;if(t instanceof u.PerspectiveCamera){var r=d.setFromMatrixPosition(e.matrixWorld),n=m.setFromMatrixPosition(t.matrixWorld),o=t.fov*Math.PI/180,a=r.distanceTo(n);return 1/(2*Math.tan(o/2)*a)}return 1}($.current,q)*W;U.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(j,")")}te.current=e,ee.current=q.zoom}}})),c.createElement("group",(0,i.Z)({},A,{ref:$}))}))}}]);
//# sourceMappingURL=209.ce5ac52c.chunk.js.map