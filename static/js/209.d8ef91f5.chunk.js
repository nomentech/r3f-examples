"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[209],{8819:function(e,t,r){r.r(t),r.d(t,{default:function(){return y}});var n=r(1413),a=r(4925),o=r(9439),i=r(2791),s=r(7760),c=r(4647),u=r(2794);function l(e){var t=e.all,r=e.scene,n=e.camera,a=(0,u.w)((function(e){return e.gl})),o=(0,u.w)((function(e){return e.camera})),c=(0,u.w)((function(e){return e.scene}));return i.useLayoutEffect((function(){var e=[];t&&(r||c).traverse((function(t){!1===t.visible&&(e.push(t),t.visible=!0)})),a.compile(r||c,n||o);var i=new s.WebGLCubeRenderTarget(128);new s.CubeCamera(.01,1e5,i).update(a,r||c),i.dispose(),e.forEach((function(e){return e.visible=!1}))}),[]),null}var f=r(4956),d=r(3520),p=r.p+"static/media/2294472375_24a3b8ef46_o.f98b93fae8690ffdf032.jpg",m=r.p+"static/media/Photosphere1.0c0b410e30a72f1ec11f.jpg",h=r(184),v=["link"],x=[{name:"outside",color:"lightpink",position:[10,0,-15],url:p,link:1},{name:"inside",color:"lightblue",position:[15,0,0],url:m,link:0}],g=function(e){var t=e.name,r=e.position,n=e.texture,a=e.onClick;return(0,h.jsxs)("group",{children:[(0,h.jsxs)("mesh",{children:[(0,h.jsx)("sphereBufferGeometry",{args:[500,60,40]}),(0,h.jsx)("meshBasicMaterial",{map:n,side:s.BackSide})]}),(0,h.jsxs)("mesh",{position:r,children:[(0,h.jsx)("sphereGeometry",{args:[1.25,32,32]}),(0,h.jsx)("meshBasicMaterial",{color:"white"}),(0,h.jsx)(f.V,{center:!0,children:(0,h.jsx)("div",{className:"cursor-pointer text-blue-500 text-sm",onClick:a,children:t})})]})]})},b=function(){var e=(0,i.useState)(0),t=(0,o.Z)(e,2),r=t[0],c=t[1],l=x[r],f=l.link,d=(0,a.Z)(l,v),p=(0,u.z)(s.TextureLoader,x.map((function(e){return e.url})));return(0,h.jsx)(g,(0,n.Z)((0,n.Z)({onClick:function(){return c(f)}},d),{},{texture:p[r]}))},y=function(e){var t=e.children;return(0,h.jsxs)(h.Fragment,{children:[t,(0,h.jsxs)(c.Xz,{frameloop:"demand",camera:{position:[0,0,.1]},children:[(0,h.jsx)(d.z,{enableZoom:!1,enablePan:!1,enableDamping:!0,dampingFactor:.2,autoRotate:!1,rotateSpeed:-.5}),(0,h.jsxs)(i.Suspense,{fallback:null,children:[(0,h.jsx)(l,{all:!0}),(0,h.jsx)(b,{})]})]})]})}},4956:function(e,t,r){r.d(t,{V:function(){return w}});var n=r(1413),a=r(9439),o=r(4925),i=r(7462),s=r(2791),c=r(1250),u=r(7760),l=r(2794),f=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],d=new u.Vector3,p=new u.Vector3,m=new u.Vector3;function h(e,t,r){var n=d.setFromMatrixPosition(e.matrixWorld);n.project(t);var a=r.width/2,o=r.height/2;return[n.x*a+a,-n.y*o+o]}var v=function(e){return Math.abs(e)<1e-10?0:e};function x(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="matrix3d(",a=0;16!==a;a++)n+=v(t[a]*e.elements[a])+(15!==a?",":")");return r+n}var g,b=(g=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],function(e){return x(e,g)}),y=function(e,t){return x(e,[1/(r=t),1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1],"translate(-50%,-50%)");var r},w=s.forwardRef((function(e,t){var r,x=e.children,g=e.eps,w=void 0===g?.001:g,M=e.style,j=e.className,C=e.prepend,P=e.center,E=e.fullscreen,W=e.portal,k=e.distanceFactor,F=e.sprite,R=void 0!==F&&F,Z=e.transform,z=void 0!==Z&&Z,T=e.occlude,I=e.onOcclude,N=e.zIndexRange,O=void 0===N?[16777271,0]:N,S=e.calculatePosition,L=void 0===S?h:S,V=e.as,B=void 0===V?"div":V,_=e.wrapperClass,G=e.pointerEvents,A=void 0===G?"auto":G,D=(0,o.Z)(e,f),X=(0,l.w)((function(e){return e.gl})),q=(0,l.w)((function(e){return e.camera})),H=(0,l.w)((function(e){return e.scene})),J=(0,l.w)((function(e){return e.size})),K=(0,l.w)((function(e){return e.raycaster})),Q=s.useState((function(){return document.createElement(B)})),U=(0,a.Z)(Q,1)[0],Y=s.useMemo((function(){return c.createRoot(U)}),[U]),$=s.useRef(null),ee=s.useRef(0),te=s.useRef([0,0]),re=s.useRef(null),ne=s.useRef(null),ae=null!==(r=null==W?void 0:W.current)&&void 0!==r?r:X.domElement.parentNode;s.useEffect((function(){if($.current){if(H.updateMatrixWorld(),z)U.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{var e=L($.current,q,J);U.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return ae&&(C?ae.prepend(U):ae.appendChild(U)),function(){ae&&ae.removeChild(U),Y.unmount()}}}),[ae,z]),s.useLayoutEffect((function(){_&&(U.className=_)}),[_]);var oe=s.useMemo((function(){return z?{position:"absolute",top:0,left:0,width:J.width,height:J.height,transformStyle:"preserve-3d",pointerEvents:"none"}:(0,n.Z)((0,n.Z)({position:"absolute",transform:P?"translate3d(-50%,-50%,0)":"none"},E&&{top:-J.height/2,left:-J.width/2,width:J.width,height:J.height}),M)}),[M,P,E,J,z]),ie=s.useMemo((function(){return{position:"absolute",pointerEvents:A}}),[A]);s.useLayoutEffect((function(){z?Y.render(s.createElement("div",{ref:re,style:oe},s.createElement("div",{ref:ne,style:ie},s.createElement("div",{ref:t,className:j,style:M,children:x})))):Y.render(s.createElement("div",{ref:t,style:oe,className:j,children:x}))}));var se=s.useRef(!0);return(0,l.x)((function(){if($.current){q.updateMatrixWorld(),$.current.updateWorldMatrix(!0,!1);var e=z?te.current:L($.current,q,J);if(z||Math.abs(ee.current-q.zoom)>w||Math.abs(te.current[0]-e[0])>w||Math.abs(te.current[1]-e[1])>w){var t=function(e,t){var r=d.setFromMatrixPosition(e.matrixWorld),n=p.setFromMatrixPosition(t.matrixWorld),a=r.sub(n),o=t.getWorldDirection(m);return a.angleTo(o)>Math.PI/2}($.current,q),r=!1;"boolean"===typeof T?!0===T&&(r=[H]):Array.isArray(T)&&(r=T.map((function(e){return e.current})));var n=se.current;if(r){var a=function(e,t,r,n){var a=d.setFromMatrixPosition(e.matrixWorld),o=a.clone();o.project(t),r.setFromCamera(o,t);var i=r.intersectObjects(n,!0);if(i.length){var s=i[0].distance;return a.distanceTo(r.ray.origin)<s}return!0}($.current,q,K,r);se.current=a&&!t}else se.current=!t;if(n!==se.current&&(I?I(!se.current):U.style.display=se.current?"block":"none"),U.style.zIndex="".concat(function(e,t,r){if(t instanceof u.PerspectiveCamera||t instanceof u.OrthographicCamera){var n=d.setFromMatrixPosition(e.matrixWorld),a=p.setFromMatrixPosition(t.matrixWorld),o=n.distanceTo(a),i=(r[1]-r[0])/(t.far-t.near),s=r[1]-i*t.far;return Math.round(i*o+s)}}($.current,q,O)),z){var o=J.width/2,i=J.height/2,s=q.projectionMatrix.elements[5]*i,c=q.isOrthographicCamera,l=q.top,f=q.left,h=q.bottom,x=q.right,g=b(q.matrixWorldInverse),M=c?"scale(".concat(s,")translate(").concat(v(-(x+f)/2),"px,").concat(v((l+h)/2),"px)"):"translateZ(".concat(s,"px)"),j=$.current.matrixWorld;R&&((j=q.matrixWorldInverse.clone().transpose().copyPosition(j).scale($.current.scale)).elements[3]=j.elements[7]=j.elements[11]=0,j.elements[15]=1),U.style.width=J.width+"px",U.style.height=J.height+"px",U.style.perspective=c?"":"".concat(s,"px"),re.current&&ne.current&&(re.current.style.transform="".concat(M).concat(g,"translate(").concat(o,"px,").concat(i,"px)"),ne.current.style.transform=y(j,1/((k||10)/400)))}else{var C=void 0===k?1:function(e,t){if(t instanceof u.OrthographicCamera)return t.zoom;if(t instanceof u.PerspectiveCamera){var r=d.setFromMatrixPosition(e.matrixWorld),n=p.setFromMatrixPosition(t.matrixWorld),a=t.fov*Math.PI/180,o=r.distanceTo(n);return 1/(2*Math.tan(a/2)*o)}return 1}($.current,q)*k;U.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(C,")")}te.current=e,ee.current=q.zoom}}})),s.createElement("group",(0,i.Z)({},D,{ref:$}))}))}}]);
//# sourceMappingURL=209.d8ef91f5.chunk.js.map