{"version":3,"file":"static/js/392.99b5feb9.chunk.js","mappings":"mSAGO,ICDiBA,EAAUC,EAAcC,EAAgBC,EDCnDC,GCDWJ,EDEtB,CACEK,aAAc,IACdC,WAAY,EACZC,IAAK,KACLC,KAAM,KACNC,KAAM,MCPwBR,EDCa,wJCDCC,EDCD,8xBCA7C,0CACE,aAAc,sBACZ,IAAMQ,EAAUC,OAAOD,QAAQV,GADnB,OAGZ,cAAM,CACJA,SAAUU,EAAQE,QAAO,SAACC,EAAD,GAAwB,mBAAjBC,EAAiB,KAAXC,EAAW,KACzCC,EAAUC,EAAAA,cAAAA,OAAA,UACbH,EAAO,CACNC,MAAAA,KAGJ,yBAAYF,GACPG,KAEJ,IACHf,aAAAA,EACAC,eAAAA,IAGFQ,EAAQQ,SAAQ,gBAAEJ,GAAF,sBAAYH,OAAOQ,gBAAP,UAA4BL,EAAM,CAC5DM,IAAK,kBAAM,EAAKpB,SAASc,GAAMC,OAC/BM,IAAK,SAAAC,GAAC,OAAI,EAAKtB,SAASc,GAAMC,MAAQO,QAEpCnB,GAAQA,GAAO,WAtBP,EADhB,kBAAqBc,EAAAA,kBDkCvBM,EAAAA,EAAAA,GAAO,CAAEnB,kBAAAA,I,oKE3BHoB,EAAc,WAClB,IAAMC,GAAWC,EAAAA,EAAAA,UACjB,GAA0CC,EAAAA,EAAAA,GAAW,CAACC,EAAMC,EAAMpB,IAAlE,eAAOqB,EAAP,KAAiBC,EAAjB,KAA2BC,EAA3B,KACA,GAA4BC,EAAAA,EAAAA,UAAiB,GAA7C,eAAOC,EAAP,KAAgBC,EAAhB,KAGA,OAFAC,EAAAA,EAAAA,IAAS,kBAAOX,EAAIY,QAAQ/B,WAAaW,EAAAA,UAAAA,KAAqBQ,EAAIY,QAAQ/B,WAAY4B,EAAS,QAG7F,kBAAMI,cAAe,kBAAMH,EAAS,IAAII,aAAc,kBAAMJ,EAAS,IAArE,WACE,8BACA,8BACEV,IAAKA,EACLlB,IAAKuB,EACL,eAAcb,EAAAA,aACdT,KAAMuB,EACN,gBAAed,EAAAA,aACfR,KAAMuB,EACN,gBAAef,EAAAA,aACfuB,YAAY,QAmBpB,EAbgB,SAAC,GAAuB,IAArBC,EAAoB,EAApBA,SACjB,OACE,gCACIA,GACF,SAAC,KAAD,CAAQC,OAAQ,CAAEC,SAAU,CAAC,EAAG,EAAG,GAAIC,IAAK,IAA5C,UACE,SAAC,EAAAC,SAAD,CAAUC,SAAU,KAApB,UACE,SAACtB,EAAD,a,iGCnCJuB,EAAW,SAAAC,GAAG,OAAIA,IAAQrC,OAAOqC,KAASC,MAAMC,QAAQF,IAAuB,oBAARA,GAC7E,SAASrB,EAAWwB,GAClB,IAAMC,GAAKC,EAAAA,EAAAA,IAAS,SAAAC,GAAK,OAAIA,EAAMF,MAC7BG,GAAWC,EAAAA,EAAAA,GAAUC,EAAAA,cAAeV,EAASI,GAASxC,OAAO+C,OAAOP,GAASA,GAQnF,IALAQ,EAAAA,EAAAA,YAAU,YACMV,MAAMC,QAAQK,GAAYA,EAAW,CAACA,IAC9CrC,QAAQkC,EAAGQ,eAChB,CAACR,EAAIG,IAEJR,EAASI,GAAQ,CACnB,IAAMU,EAAOlD,OAAOkD,KAAKV,GACnBW,EAAQ,GAId,OAHAD,EAAK3C,SAAQ,SAAA6C,GAAG,OAAIpD,OAAOqD,OAAOF,GAAd,UACjBC,EAAMR,EAASM,EAAKI,QAAQF,SAExBD,EAEP,OAAOP,EAIX5B,EAAWuC,QAAU,SAAAlB,GAAG,OAAIQ,EAAAA,EAAAA,QAAkBC,EAAAA,cAAeT,IAE7DrB,EAAWwC,MAAQ,SAAAhB,GAAK,OAAIK,EAAAA,EAAAA,MAAgBC,EAAAA,cAAeN","sources":["basic-examples/shadermaterials/ImageFadeMaterial.tsx","../node_modules/@react-three/drei/core/shaderMaterial.js","basic-examples/shadermaterials/Example.tsx","../node_modules/@react-three/drei/core/useTexture.js"],"sourcesContent":["import { extend, Object3DNode } from \"@react-three/fiber\"\nimport { shaderMaterial } from \"@react-three/drei\"\n\nexport const ImageFadeMaterial = shaderMaterial(\n  {\n    effectFactor: 1.2,\n    dispFactor: 0,\n    tex: null,\n    tex2: null,\n    disp: null\n  },\n  `varying vec2 vUv;\n      void main() {\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n      }`,\n  `varying vec2 vUv;\n      uniform sampler2D tex;\n      uniform sampler2D tex2;\n      uniform sampler2D disp;\n      uniform float _rot;\n      uniform float dispFactor;\n      uniform float effectFactor;\n      void main() {\n        vec2 uv = vUv;\n        vec4 disp = texture2D(disp, uv);\n        vec2 distortedPosition = vec2(uv.x, uv.y + dispFactor * (disp.r*effectFactor));\n        vec2 distortedPosition2 = vec2(uv.x, uv.y - (1.0 - dispFactor) * (disp.r*effectFactor));\n        vec4 _texture = texture2D(tex, distortedPosition);\n        vec4 _texture2 = texture2D(tex2, distortedPosition2);\n        vec4 finalTexture = mix(_texture, _texture2, dispFactor);\n        gl_FragColor = finalTexture;\n        #include <tonemapping_fragment>\n        #include <encodings_fragment>\n      }`\n)\n\nextend({ ImageFadeMaterial })\n\ndeclare global {\n  namespace JSX {\n    interface IntrinsicElements {\n      imageFadeMaterial: Object3DNode<any, typeof ImageFadeMaterial>\n    }\n  }\n}","import * as THREE from 'three';\n\nfunction shaderMaterial(uniforms, vertexShader, fragmentShader, onInit) {\n  return class extends THREE.ShaderMaterial {\n    constructor() {\n      const entries = Object.entries(uniforms); // Create unforms and shaders\n\n      super({\n        uniforms: entries.reduce((acc, [name, value]) => {\n          const uniform = THREE.UniformsUtils.clone({\n            [name]: {\n              value\n            }\n          });\n          return { ...acc,\n            ...uniform\n          };\n        }, {}),\n        vertexShader,\n        fragmentShader\n      }); // Create getter/setters\n\n      entries.forEach(([name]) => Object.defineProperty(this, name, {\n        get: () => this.uniforms[name].value,\n        set: v => this.uniforms[name].value = v\n      }));\n      if (onInit) onInit(this);\n    }\n\n  };\n}\n\nexport { shaderMaterial };\n","import { Suspense, useRef, useState } from 'react'\nimport * as THREE from 'three'\nimport { Canvas, useFrame } from '@react-three/fiber'\nimport { useTexture } from '@react-three/drei'\n\nimport './ImageFadeMaterial'\nimport img1 from '../../textures/Img1.jpg'\nimport img2 from '../../textures/Img2.jpg'\nimport disp from '../../textures/10.jpg'\n\nconst FadingImage = () => {\n  const ref: any = useRef()\n  const [texture1, texture2, dispTexture] = useTexture([img1, img2, disp])\n  const [hovered, setHover] = useState<number>(0)\n  useFrame(() => (ref.current.dispFactor = THREE.MathUtils.lerp(ref.current.dispFactor, hovered, 0.1)))\n\n  return (\n    <mesh onPointerMove={() => setHover(1)} onPointerOut={() => setHover(0)} >\n      <planeGeometry />\n      <imageFadeMaterial\n        ref={ref}\n        tex={texture1}\n        tex-encoding={THREE.sRGBEncoding}\n        tex2={texture2}\n        tex2-encoding={THREE.sRGBEncoding}\n        disp={dispTexture}\n        disp-encoding={THREE.sRGBEncoding}\n        toneMapped={false}\n      />\n    </mesh>\n  )\n}\n\nconst Example = ({ children }: any) => {\n  return (\n    <>\n      { children }\n      <Canvas camera={{ position: [0, 0, 2], fov: 50 }}>\n        <Suspense fallback={null}>\n          <FadingImage />\n        </Suspense>\n      </Canvas>\n    </>\n  )\n}\n\nexport default Example","import { TextureLoader } from 'three';\nimport { useThree, useLoader } from '@react-three/fiber';\nimport { useEffect } from 'react';\n\nconst IsObject = url => url === Object(url) && !Array.isArray(url) && typeof url !== 'function';\nfunction useTexture(input) {\n  const gl = useThree(state => state.gl);\n  const textures = useLoader(TextureLoader, IsObject(input) ? Object.values(input) : input); // https://github.com/mrdoob/three.js/issues/22696\n  // Upload the texture to the GPU immediately instead of waiting for the first render\n\n  useEffect(() => {\n    const array = Array.isArray(textures) ? textures : [textures];\n    array.forEach(gl.initTexture);\n  }, [gl, textures]);\n\n  if (IsObject(input)) {\n    const keys = Object.keys(input);\n    const keyed = {};\n    keys.forEach(key => Object.assign(keyed, {\n      [key]: textures[keys.indexOf(key)]\n    }));\n    return keyed;\n  } else {\n    return textures;\n  }\n}\n\nuseTexture.preload = url => useLoader.preload(TextureLoader, url);\n\nuseTexture.clear = input => useLoader.clear(TextureLoader, input);\n\nexport { IsObject, useTexture };\n"],"names":["uniforms","vertexShader","fragmentShader","onInit","ImageFadeMaterial","effectFactor","dispFactor","tex","tex2","disp","entries","Object","reduce","acc","name","value","uniform","THREE","forEach","defineProperty","get","set","v","extend","FadingImage","ref","useRef","useTexture","img1","img2","texture1","texture2","dispTexture","useState","hovered","setHover","useFrame","current","onPointerMove","onPointerOut","toneMapped","children","camera","position","fov","Suspense","fallback","IsObject","url","Array","isArray","input","gl","useThree","state","textures","useLoader","TextureLoader","values","useEffect","initTexture","keys","keyed","key","assign","indexOf","preload","clear"],"sourceRoot":""}