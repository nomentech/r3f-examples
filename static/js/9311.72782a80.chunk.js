"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[9311],{9311:function(e,t,r){r.r(t),r.d(t,{default:function(){return F}});var n=r(1413),o=r(4925),i=r(9439),a=r(2791),s=r(4647),c=r(1690),u=r(7462),f=r(3599),l=["makeDefault"],d=a.forwardRef((function(e,t){var r=e.makeDefault,n=(0,o.Z)(e,l),i=(0,c.w)((function(e){return e.set})),s=(0,c.w)((function(e){return e.camera})),d=(0,c.w)((function(e){return e.size})),p=a.useRef();return a.useLayoutEffect((function(){var e=p.current;e&&!n.manual&&(e.aspect=d.width/d.height,e.updateProjectionMatrix())}),[d,n]),a.useLayoutEffect((function(){if(r&&p.current){var e=s;return i((function(){return{camera:p.current}})),function(){return i((function(){return{camera:e}}))}}}),[s,p,r,i]),a.createElement("perspectiveCamera",(0,u.Z)({ref:(0,f.Z)([p,t])},n))})),p=r(4637),v=r(5712),h=r(184),m=["args"],x=["config","enableMotor","motorSpeed","color","children","name","pivot","parentPivot"],g=["children","transparent","opacity","color","args"],j=["bodyDepth","delay","motorSpeed"],w=function(e){var t=(0,i.Z)(e,3),r=t[0],n=void 0===r?0:r,o=t[1],a=void 0===o?0:o,s=t[2],c=void 0===s?0:s;return function(e){var t=(0,i.Z)(e,3),r=t[0],o=void 0===r?1:r,s=t[1],u=void 0===s?1:s,f=t[2];return[n*o,a*u,c*(void 0===f?1:f)]}},b=Math.pow(2,0),Z=Math.pow(2,1),M=(0,a.createContext)(null),y=function(e){var t=e.args,r=(0,o.Z)(e,m),a=(0,v.xK)((function(){return(0,n.Z)({type:"Static",collisionFilterGroup:b},r)})),s=(0,i.Z)(a,1)[0];return(0,h.jsxs)("group",{ref:s,children:[(0,h.jsxs)("mesh",{children:[(0,h.jsx)("planeGeometry",{args:t}),(0,h.jsx)("meshBasicMaterial",{color:"#ffb385"})]}),(0,h.jsxs)("mesh",{receiveShadow:!0,children:[(0,h.jsx)("planeGeometry",{args:t}),(0,h.jsx)("shadowMaterial",{color:"lightsalmon"})]})]})},E=(0,a.forwardRef)((function(e,t){var r=e.config,s=void 0===r?{}:r,c=e.enableMotor,u=e.motorSpeed,f=e.color,l=e.children,d=(e.name,e.pivot),p=void 0===d?[0,0,0]:d,m=e.parentPivot,g=void 0===m?[0,0,0]:m,j=(0,o.Z)(e,x),y=(0,a.useContext)(M),E=y?w(y[1].args):function(){},P=j.args?w(j.args):function(){},k=(0,v.EJ)((function(){return(0,n.Z)({collisionFilterGroup:Z,collisionFilterMask:b,linearDamping:.4,mass:1},j)}),t),R=(0,i.Z)(k,1)[0],D=(0,v.yt)(R,y?y[0]:null,(0,n.Z)({collideConnected:!1,axisA:[0,0,1],axisB:[0,0,1],pivotA:P(p),pivotB:E(g)},s)),F=(0,i.Z)(D,3)[2];return(0,a.useEffect)((function(){F[(c?"enable":"disable")+"Motor"]()}),[c]),(0,a.useEffect)((function(){F.setMotorSpeed(u)}),[u]),(0,h.jsxs)(M.Provider,{value:[R,j],children:[(0,h.jsx)(S,(0,n.Z)((0,n.Z)({ref:R},j),{},{color:f})),l]})})),S=(0,a.forwardRef)((function(e,t){var r=e.children,i=e.transparent,a=void 0!==i&&i,s=e.opacity,c=void 0===s?1:s,u=e.color,f=void 0===u?"white":u,l=e.args,d=void 0===l?[1,1,1]:l,p=(0,o.Z)(e,g);return(0,h.jsxs)("mesh",(0,n.Z)((0,n.Z)({receiveShadow:!0,castShadow:!0,ref:t},p),{},{children:[(0,h.jsx)("boxGeometry",{args:d}),(0,h.jsx)("meshStandardMaterial",{color:f,transparent:a,opacity:c}),r]}))})),P=function(){return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(E,{collisionFilterGroup:b,collisionFilterMask:Z|b,mass:4,args:[-30,-.4,30],position:[-45,-4,0],rotation:[0,Math.PI/-4,0],color:"#ffb385"}),(0,h.jsx)(E,{collisionFilterGroup:b,collisionFilterMask:Z|b,mass:4,args:[-15,-.5,15],position:[-50,-2,0],rotation:[0,Math.PI/-1.25,0],color:"#dc9c76"}),(0,h.jsx)(E,{collisionFilterGroup:b,collisionFilterMask:Z|b,mass:4,args:[-10,-.5,10],position:[-45,0,-5],rotation:[0,Math.PI/3,0],color:"#c58e6e"})]})},k=(0,a.forwardRef)((function(e,t){var r=Object.assign({},e),o=(0,a.useState)(7),s=(0,i.Z)(o,2),c=s[0],u=s[1],f=t,l=(0,a.useRef)();return(0,v.NF)(l,f,void 0),(0,h.jsxs)("group",(0,n.Z)((0,n.Z)({},r),{},{onPointerDown:function(){return u(2)},onPointerUp:function(){return u(7)},children:[(0,h.jsx)(R,{ref:f,delay:1e3,bodyDepth:3,motorSpeed:c}),(0,h.jsx)(R,{ref:l,motorSpeed:c})]}))})),R=(0,a.forwardRef)((function(e,t){var r=e.bodyDepth,s=void 0===r?0:r,c=e.delay,u=void 0===c?0:c,f=e.motorSpeed,l=void 0===f?7:f,d=(0,o.Z)(e,j),p=(0,a.useRef)(),m=(0,a.useRef)(),x=(0,a.useRef)(),g=(0,a.useRef)(),b=.3,Z=w([1,3,b]),M=w([1,5,b]),y=w([1,10,b]),S=(0,a.useState)(!1),P=(0,i.Z)(S,2),k=P[0],R=P[1];return(0,v.yt)(x,m,{collideConnected:!1,axisA:[0,0,1],axisB:[0,0,1],pivotA:Z([0,.5,.5]),pivotB:M([0,.5,-.5])}),(0,v.yt)(g,p,{collideConnected:!1,axisA:[0,0,1],axisB:[0,0,1],pivotA:M([0,.5,.5]),pivotB:y([0,.5,-.5])}),(0,a.useEffect)((function(){var e=setTimeout((function(){return R(!0)}),u);return function(){return clearTimeout(e)}}),[]),(0,h.jsx)("group",(0,n.Z)((0,n.Z)({},d),{},{children:(0,h.jsxs)(E,{ref:t,mass:1,args:[2,10,s?s+3*b:0],rotation:[0,0,Math.PI/2],position:[0,0,s],transparent:!s,opacity:Number(!!s),children:[(0,h.jsx)(E,{ref:x,args:[1,3,b],position:[-2,.5,s],rotation:[0,0,Math.PI/3],pivot:[0,-.5,-.5],parentPivot:[0,.2,.5],color:"#85ffb3"}),(0,h.jsx)(E,{enableMotor:k,motorSpeed:l,args:[.5,1,b],position:[-5,-.75,s],parentPivot:[0,.5,.5],pivot:[0,.5,-.5],color:"black",children:(0,h.jsx)(E,{ref:m,args:[1,6,b],position:[-5,-1,s],rotation:[0,0,Math.PI/-6],parentPivot:[0,-.5,.5],pivot:[0,0,-.5],color:"#85b3ff",children:(0,h.jsx)(E,{ref:p,parentPivot:[0,0,.5],pivot:[0,-.5,-.5],args:[1,10,b],position:[0,0,s],color:"#ff85b3",rotation:[0,0,Math.PI/-2.5]})})}),(0,h.jsx)(E,{ref:g,args:[1,6,b],pivot:[0,-0,-1],parentPivot:[-0,-.5,.5],position:[5,0,s],rotation:[0,0,Math.PI/4],color:"#85b3ff"})]})}))})),D=function(){var e=(0,a.useRef)(),t=(0,a.useRef)();return(0,c.x)((function(){return e.current.lookAt(t.current.position)})),(0,h.jsxs)(a.Suspense,{fallback:null,children:[(0,h.jsx)(d,{ref:e,makeDefault:!0,position:[-40,10,20]}),(0,h.jsx)("hemisphereLight",{intensity:.35}),(0,h.jsx)("spotLight",{position:[20,30,10],angle:Math.PI/5,penumbra:1,intensity:1,distance:180,castShadow:!0,"shadow-mapSize-width":256,"shadow-mapSize-height":256}),(0,h.jsx)("color",{attach:"background",args:["#f6d186"]}),(0,h.jsxs)(v.wI,{iterations:80,gravity:[0,-40,0],children:[(0,h.jsx)(k,{ref:t}),(0,h.jsx)(P,{}),(0,h.jsx)(y,{args:[120,120],position:[-20,-5,0],rotation:[-Math.PI/2,0,0]})]})]})},F=function(e){var t=e.children;return(0,h.jsxs)(h.Fragment,{children:[t,(0,h.jsxs)(s.Xz,{shadows:!0,gl:{alpha:!1},children:[(0,h.jsx)(p.z,{}),(0,h.jsx)(D,{})]}),(0,h.jsx)("div",{style:{position:"absolute",top:20,left:100,color:"white",fontSize:"1.2em"},children:(0,h.jsx)("pre",{children:"* click to reduce speed"})})]})}},4637:function(e,t,r){r.d(t,{z:function(){return u}});var n=r(4925),o=r(7462),i=r(1690),a=r(2791),s=r(233),c=["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"],u=a.forwardRef((function(e,t){var r=e.makeDefault,u=e.camera,f=e.regress,l=e.domElement,d=e.enableDamping,p=void 0===d||d,v=e.onChange,h=e.onStart,m=e.onEnd,x=(0,n.Z)(e,c),g=(0,i.w)((function(e){return e.invalidate})),j=(0,i.w)((function(e){return e.camera})),w=(0,i.w)((function(e){return e.gl})),b=(0,i.w)((function(e){return e.events})),Z=(0,i.w)((function(e){return e.set})),M=(0,i.w)((function(e){return e.get})),y=(0,i.w)((function(e){return e.performance})),E=u||j,S=l||b.connected||w.domElement,P=a.useMemo((function(){return new s.z(E)}),[E]);return(0,i.x)((function(){P.enabled&&P.update()}),-1),a.useEffect((function(){return P.connect(S),function(){P.dispose()}}),[S,f,P,g]),a.useEffect((function(){var e=function(e){g(),f&&y.regress(),v&&v(e)};return P.addEventListener("change",e),h&&P.addEventListener("start",h),m&&P.addEventListener("end",m),function(){h&&P.removeEventListener("start",h),m&&P.removeEventListener("end",m),P.removeEventListener("change",e)}}),[v,h,m]),a.useEffect((function(){if(r){var e=M().controls;return Z({controls:P}),function(){return Z({controls:e})}}}),[r,P]),a.createElement("primitive",(0,o.Z)({ref:t,object:P,enableDamping:p},x))}))}}]);
//# sourceMappingURL=9311.72782a80.chunk.js.map