"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[9289],{1564:function(e,t,n){n.r(t),n.d(t,{default:function(){return l}});var r=n(4647),i=n(3655),a=n(410),o=n(9142),u=n(4637),v=n.p+"static/media/headless.ed27d4d0fc7075c0f38f.glb",s=n(2791),c=n(184),f=function(){var e=(0,i.L)(v).nodes;return(0,c.jsx)("group",{dispose:null,children:(0,c.jsxs)("mesh",{geometry:e.Cube.geometry,children:[(0,c.jsx)("meshStandardMaterial",{transparent:!0}),(0,c.jsx)(a.w,{})]})})},l=function(e){var t=e.children;return(0,c.jsxs)(c.Fragment,{children:[t,(0,c.jsxs)(r.Xz,{dpr:[1,2],camera:{position:[0,0,3],fov:50},children:[(0,c.jsx)(s.Suspense,{fallback:null,children:(0,c.jsx)(o.H,{children:(0,c.jsx)(f,{})})}),(0,c.jsx)(u.z,{dampingFactor:.3})]})]})}},8202:function(e,t,n){n.d(t,{j:function(){return d}});var r=n(1413),i=n(9439),a=n(4925),o=n(7462),u=n(2791),v=n(7760),s=n(1690),c={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},f={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},l=["scale","frames","opacity","width","height","blur","far","resolution","smooth","color","depthWrite","renderOrder"],d=u.forwardRef((function(e,t){var n=e.scale,d=void 0===n?10:n,m=e.frames,h=void 0===m?1/0:m,g=e.opacity,p=void 0===g?1:g,x=e.width,D=void 0===x?1:x,y=e.height,w=void 0===y?1:y,U=e.blur,E=void 0===U?1:U,b=e.far,M=void 0===b?10:b,S=e.resolution,j=void 0===S?512:S,L=e.smooth,C=void 0===L||L,Z=e.color,R=void 0===Z?"#000000":Z,k=e.depthWrite,T=void 0!==k&&k,B=e.renderOrder,G=(0,a.Z)(e,l),W=(0,s.w)((function(e){return e.scene})),A=(0,s.w)((function(e){return e.gl})),P=u.useRef(null);D*=Array.isArray(d)?d[0]:d||1,w*=Array.isArray(d)?d[1]:d||1;var _=u.useMemo((function(){var e=new v.WebGLRenderTarget(j,j),t=new v.WebGLRenderTarget(j,j);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;var n=new v.PlaneBufferGeometry(D,w).rotateX(Math.PI/2),i=new v.Mesh(n),a=new v.MeshDepthMaterial;a.depthTest=a.depthWrite=!1,a.onBeforeCompile=function(e){e.uniforms=(0,r.Z)((0,r.Z)({},e.uniforms),{},{ucolor:{value:new v.Color(R).convertSRGBToLinear()}}),e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor, ( 1.0 - fragCoordZ ) * 1.0 );")};var o=new v.ShaderMaterial(c),u=new v.ShaderMaterial(f);return u.depthTest=o.depthTest=!1,[e,n,a,i,o,u,t]}),[j,D,w,d,R]),z=(0,i.Z)(_,7),F=z[0],O=z[1],I=z[2],V=z[3],H=z[4],X=z[5],q=z[6],J=function(e){V.visible=!0,V.material=H,H.uniforms.tDiffuse.value=F.texture,H.uniforms.h.value=1*e/256,A.setRenderTarget(q),A.render(V,P.current),V.material=X,X.uniforms.tDiffuse.value=q.texture,X.uniforms.v.value=1*e/256,A.setRenderTarget(F),A.render(V,P.current),V.visible=!1},K=0;return(0,s.x)((function(){if(P.current&&(h===1/0||K<h)){var e=W.background;W.background=null;var t=W.overrideMaterial;W.overrideMaterial=I,A.setRenderTarget(F),A.render(W,P.current),W.overrideMaterial=t,J(E),C&&J(.4*E),A.setRenderTarget(null),W.background=e,K++}})),u.createElement("group",(0,o.Z)({"rotation-x":Math.PI/2},G,{ref:t}),u.createElement("mesh",{renderOrder:B,geometry:O,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},u.createElement("meshBasicMaterial",{map:F.texture,"map-encoding":A.outputEncoding,transparent:!0,opacity:p,depthWrite:T})),u.createElement("orthographicCamera",{ref:P,args:[-D/2,D/2,w/2,-w/2,0,M]}))}))},410:function(e,t,n){n.d(t,{w:function(){return v}});var r=n(4925),i=n(7462),a=n(2791),o=n(7760),u=["userData","children","geometry","threshold","color"];function v(e){e.userData;var t=e.children,n=e.geometry,v=e.threshold,s=void 0===v?15:v,c=e.color,f=void 0===c?"black":c,l=(0,r.Z)(e,u),d=a.useRef(null);return a.useLayoutEffect((function(){var e=d.current.parent;if(e){var t=n||e.geometry;t===d.current.userData.currentGeom&&s===d.current.userData.currentThreshold||(d.current.userData.currentGeom=t,d.current.userData.currentThreshold=s,d.current.geometry=new o.EdgesGeometry(t,s))}})),a.createElement("lineSegments",(0,i.Z)({ref:d,raycast:function(){return null}},l),t||a.createElement("lineBasicMaterial",{color:f}))}},4637:function(e,t,n){n.d(t,{z:function(){return s}});var r=n(4925),i=n(7462),a=n(1690),o=n(2791),u=n(233),v=["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"],s=o.forwardRef((function(e,t){var n=e.makeDefault,s=e.camera,c=e.regress,f=e.domElement,l=e.enableDamping,d=void 0===l||l,m=e.onChange,h=e.onStart,g=e.onEnd,p=(0,r.Z)(e,v),x=(0,a.w)((function(e){return e.invalidate})),D=(0,a.w)((function(e){return e.camera})),y=(0,a.w)((function(e){return e.gl})),w=(0,a.w)((function(e){return e.events})),U=(0,a.w)((function(e){return e.set})),E=(0,a.w)((function(e){return e.get})),b=(0,a.w)((function(e){return e.performance})),M=s||D,S=f||w.connected||y.domElement,j=o.useMemo((function(){return new u.z(M)}),[M]);return(0,a.x)((function(){j.enabled&&j.update()}),-1),o.useEffect((function(){return j.connect(S),function(){j.dispose()}}),[S,c,j,x]),o.useEffect((function(){var e=function(e){x(),c&&b.regress(),m&&m(e)};return j.addEventListener("change",e),h&&j.addEventListener("start",h),g&&j.addEventListener("end",g),function(){h&&j.removeEventListener("start",h),g&&j.removeEventListener("end",g),j.removeEventListener("change",e)}}),[m,h,g]),o.useEffect((function(){if(n){var e=E().controls;return U({controls:j}),function(){return U({controls:e})}}}),[n,j]),o.createElement("primitive",(0,i.Z)({ref:t,object:j,enableDamping:d},p))}))},9142:function(e,t,n){n.d(t,{H:function(){return d}});var r=n(9439),i=n(4925),a=n(7462),o=n(2791),u=n(7760),v=n(1690),s=n(9292),c=n(8202),f=["children","controls","shadows","adjustCamera","environment","intensity","preset","shadowBias","contactShadow"],l={rembrandt:{main:[1,2,1],fill:[-2,-.5,-2]},portrait:{main:[-1,2,.5],fill:[-1,.5,-1.5]},upfront:{main:[0,2,1],fill:[-1,.5,-1.5]},soft:{main:[-2,4,4],fill:[-1,.5,-1.5]}};function d(e){var t=e.children,n=e.controls,d=e.shadows,m=void 0===d||d,h=e.adjustCamera,g=void 0===h||h,p=e.environment,x=void 0===p?"city":p,D=e.intensity,y=void 0===D?1:D,w=e.preset,U=void 0===w?"rembrandt":w,E=e.shadowBias,b=void 0===E?0:E,M=e.contactShadow,S=void 0===M?{blur:2,opacity:.5,position:[0,0,0]}:M,j=(0,i.Z)(e,f),L=l[U],C=(0,v.w)((function(e){return e.camera})),Z=(0,v.w)((function(e){return e.controls})),R=o.useRef(null),k=o.useRef(null),T=o.useState({radius:0,width:0,height:0}),B=(0,r.Z)(T,2),G=B[0],W=G.radius,A=G.width,P=G.height,_=B[1];return o.useLayoutEffect((function(){R.current.position.set(0,0,0),R.current.updateWorldMatrix(!0,!0);var e=(new u.Box3).setFromObject(k.current),t=new u.Vector3,n=new u.Sphere,r=e.max.y-e.min.y,i=e.max.x-e.min.x;e.getCenter(t),e.getBoundingSphere(n),_({radius:n.radius,width:i,height:r}),R.current.position.set(-t.x,-t.y+r/2,-t.z)}),[t]),o.useLayoutEffect((function(){if(g){var e=W/(P>A?1.5:2.5);C.position.set(0,.5*W,2.5*W),C.near=.1,C.far=Math.max(5e3,4*W),C.lookAt(0,e,0);var t=Z||(null==n?void 0:n.current);t&&(t.target.set(0,e,0),t.update())}}),[Z,W,P,A,g]),o.createElement("group",j,o.createElement("group",{ref:R},o.createElement("group",{ref:k},t)),S&&o.createElement(c.j,(0,a.Z)({scale:2*W,far:W/2},S)),x&&o.createElement(s.qA,{preset:x}),o.createElement("ambientLight",{intensity:y/3}),o.createElement("spotLight",{penumbra:1,position:[L.main[0]*W,L.main[1]*W,L.main[2]*W],intensity:2*y,castShadow:m,"shadow-bias":b}),o.createElement("pointLight",{position:[L.fill[0]*W,L.fill[1]*W,L.fill[2]*W],intensity:y}))}}}]);
//# sourceMappingURL=9289.98c9e8f5.chunk.js.map