"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[254],{1254:function(e,t,r){r.r(t);var n=r(1413),o=r(9439),i=r(4925),a=r(2791),c=r(7760),s=r(1690),u=r(4647),l=r(4956),f=r(184),d=["text","color"],p=function(e){var t=e.text,r=e.color,c=(0,i.Z)(e,d),s=(0,a.useState)(!1),u=(0,o.Z)(s,2),p=u[0],h=u[1];return(0,f.jsxs)("mesh",(0,n.Z)((0,n.Z)({},c),{},{onPointerOver:function(){return h(!0)},onPointerOut:function(){return h(!1)},children:[(0,f.jsx)("boxGeometry",{args:[2,2,2]}),(0,f.jsx)("meshStandardMaterial",{color:p?"hotpink":r}),(0,f.jsx)(l.V,{position:[0,0,1],className:"pointer-events-none",center:!0,children:t})]}))},h=function(e){var t=e.scroll,r=e.children,n=(0,s.w)().viewport,o=(0,a.useRef)();return(0,s.x)((function(e,r){o.current.position.y=c.MathUtils.damp(o.current.position.y,n.height*t.current,4,r)})),(0,f.jsx)("group",{ref:o,children:r})},m=function(){var e=(0,s.w)((function(e){return e.viewport}));return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(p,{text:(0,f.jsx)("span",{children:"This is HTML"}),color:"aquamarine"}),(0,f.jsx)(p,{text:(0,f.jsx)("h1",{children:"H1 caption"}),color:"lightblue",position:[0,-e.height,0]})]})};t.default=function(e){var t=e.children,r=(0,a.useRef)(),n=(0,a.useRef)(0);return(0,f.jsxs)(f.Fragment,{children:[t,(0,f.jsxs)(u.Xz,{onCreated:function(e){return e.events.connect(r.current)},raycaster:{computeOffsets:function(e){return{offsetX:e.clientX,offsetY:e.clientY}}},children:[(0,f.jsx)("ambientLight",{}),(0,f.jsx)("pointLight",{position:[10,0,10]}),(0,f.jsx)(h,{scroll:n,children:(0,f.jsx)(m,{})})]}),(0,f.jsx)("div",{ref:r,onScroll:function(e){return n.current=e.target.scrollTop/(e.target.scrollHeight-e.target.clientHeight)},className:"absolute w-[100vw] h-[100vh] overflow-y-auto top-0 left-0",children:(0,f.jsx)("div",{className:"h-[200vh] pointer-events-none"})})]})}},4956:function(e,t,r){r.d(t,{V:function(){return M}});var n=r(1413),o=r(9439),i=r(4925),a=r(7462),c=r(2791),s=r(1250),u=r(7760),l=r(1690),f=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],d=new u.Vector3,p=new u.Vector3,h=new u.Vector3;function m(e,t,r){var n=d.setFromMatrixPosition(e.matrixWorld);n.project(t);var o=r.width/2,i=r.height/2;return[n.x*o+o,-n.y*i+i]}var v=function(e){return Math.abs(e)<1e-10?0:e};function x(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="matrix3d(",o=0;16!==o;o++)n+=v(t[o]*e.elements[o])+(15!==o?",":")");return r+n}var g,y=(g=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],function(e){return x(e,g)}),w=function(e,t){return x(e,[1/(r=t),1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1],"translate(-50%,-50%)");var r},M=c.forwardRef((function(e,t){var r,x=e.children,g=e.eps,M=void 0===g?.001:g,j=e.style,b=e.className,P=e.prepend,W=e.center,E=e.fullscreen,C=e.portal,F=e.distanceFactor,R=e.sprite,Z=void 0!==R&&R,N=e.transform,O=void 0!==N&&N,T=e.occlude,z=e.onOcclude,I=e.zIndexRange,k=void 0===I?[16777271,0]:I,L=e.calculatePosition,S=void 0===L?m:L,V=e.as,H=void 0===V?"div":V,X=e.wrapperClass,A=e.pointerEvents,Y=void 0===A?"auto":A,_=(0,i.Z)(e,f),q=(0,l.w)((function(e){return e.gl})),D=(0,l.w)((function(e){return e.camera})),G=(0,l.w)((function(e){return e.scene})),U=(0,l.w)((function(e){return e.size})),B=(0,l.w)((function(e){return e.raycaster})),J=c.useState((function(){return document.createElement(H)})),K=(0,o.Z)(J,1)[0],Q=c.useMemo((function(){return s.createRoot(K)}),[K]),$=c.useRef(null),ee=c.useRef(0),te=c.useRef([0,0]),re=c.useRef(null),ne=c.useRef(null),oe=null!==(r=null==C?void 0:C.current)&&void 0!==r?r:q.domElement.parentNode;c.useEffect((function(){if($.current){if(G.updateMatrixWorld(),O)K.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{var e=S($.current,D,U);K.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return oe&&(P?oe.prepend(K):oe.appendChild(K)),function(){oe&&oe.removeChild(K),Q.unmount()}}}),[oe,O]),c.useLayoutEffect((function(){X&&(K.className=X)}),[X]);var ie=c.useMemo((function(){return O?{position:"absolute",top:0,left:0,width:U.width,height:U.height,transformStyle:"preserve-3d",pointerEvents:"none"}:(0,n.Z)((0,n.Z)({position:"absolute",transform:W?"translate3d(-50%,-50%,0)":"none"},E&&{top:-U.height/2,left:-U.width/2,width:U.width,height:U.height}),j)}),[j,W,E,U,O]),ae=c.useMemo((function(){return{position:"absolute",pointerEvents:Y}}),[Y]);c.useLayoutEffect((function(){O?Q.render(c.createElement("div",{ref:re,style:ie},c.createElement("div",{ref:ne,style:ae},c.createElement("div",{ref:t,className:b,style:j,children:x})))):Q.render(c.createElement("div",{ref:t,style:ie,className:b,children:x}))}));var ce=c.useRef(!0);return(0,l.x)((function(){if($.current){D.updateMatrixWorld(),$.current.updateWorldMatrix(!0,!1);var e=O?te.current:S($.current,D,U);if(O||Math.abs(ee.current-D.zoom)>M||Math.abs(te.current[0]-e[0])>M||Math.abs(te.current[1]-e[1])>M){var t=function(e,t){var r=d.setFromMatrixPosition(e.matrixWorld),n=p.setFromMatrixPosition(t.matrixWorld),o=r.sub(n),i=t.getWorldDirection(h);return o.angleTo(i)>Math.PI/2}($.current,D),r=!1;"boolean"===typeof T?!0===T&&(r=[G]):Array.isArray(T)&&(r=T.map((function(e){return e.current})));var n=ce.current;if(r){var o=function(e,t,r,n){var o=d.setFromMatrixPosition(e.matrixWorld),i=o.clone();i.project(t),r.setFromCamera(i,t);var a=r.intersectObjects(n,!0);if(a.length){var c=a[0].distance;return o.distanceTo(r.ray.origin)<c}return!0}($.current,D,B,r);ce.current=o&&!t}else ce.current=!t;if(n!==ce.current&&(z?z(!ce.current):K.style.display=ce.current?"block":"none"),K.style.zIndex="".concat(function(e,t,r){if(t instanceof u.PerspectiveCamera||t instanceof u.OrthographicCamera){var n=d.setFromMatrixPosition(e.matrixWorld),o=p.setFromMatrixPosition(t.matrixWorld),i=n.distanceTo(o),a=(r[1]-r[0])/(t.far-t.near),c=r[1]-a*t.far;return Math.round(a*i+c)}}($.current,D,k)),O){var i=U.width/2,a=U.height/2,c=D.projectionMatrix.elements[5]*a,s=D.isOrthographicCamera,l=D.top,f=D.left,m=D.bottom,x=D.right,g=y(D.matrixWorldInverse),j=s?"scale(".concat(c,")translate(").concat(v(-(x+f)/2),"px,").concat(v((l+m)/2),"px)"):"translateZ(".concat(c,"px)"),b=$.current.matrixWorld;Z&&((b=D.matrixWorldInverse.clone().transpose().copyPosition(b).scale($.current.scale)).elements[3]=b.elements[7]=b.elements[11]=0,b.elements[15]=1),K.style.width=U.width+"px",K.style.height=U.height+"px",K.style.perspective=s?"":"".concat(c,"px"),re.current&&ne.current&&(re.current.style.transform="".concat(j).concat(g,"translate(").concat(i,"px,").concat(a,"px)"),ne.current.style.transform=w(b,1/((F||10)/400)))}else{var P=void 0===F?1:function(e,t){if(t instanceof u.OrthographicCamera)return t.zoom;if(t instanceof u.PerspectiveCamera){var r=d.setFromMatrixPosition(e.matrixWorld),n=p.setFromMatrixPosition(t.matrixWorld),o=t.fov*Math.PI/180,i=r.distanceTo(n);return 1/(2*Math.tan(o/2)*i)}return 1}($.current,D)*F;K.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(P,")")}te.current=e,ee.current=D.zoom}}})),c.createElement("group",(0,a.Z)({},_,{ref:$}))}))}}]);
//# sourceMappingURL=254.b8904ca3.chunk.js.map