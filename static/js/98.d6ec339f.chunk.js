"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[98],{4098:function(t,e,n){n.r(e),n.d(e,{default:function(){return M}});var o=n(1413),a=n(4925),r=n(2791),i=n(4150),s=n(9439),c=n(323),m=n(6406),u=function(t){return t&&t.isOrthographicCamera},l=r.createContext(null);function f(t){var e=t.children,n=t.damping,o=void 0===n?6:n,a=t.fit,i=t.clip,f=t.observe,p=t.margin,x=void 0===p?1.2:p,h=t.eps,d=void 0===h?.01:h,y=t.onFit,z=r.useRef(null),g=(0,m.w)(),v=g.camera,M=g.invalidate,b=g.size,j=g.controls,w=r.useRef(y);function V(t,e){return Math.abs(t.x-e.x)<d&&Math.abs(t.y-e.y)<d&&Math.abs(t.z-e.z)<d}function k(t,e,n,o){t.x=c.MathUtils.damp(t.x,e.x,n,o),t.y=c.MathUtils.damp(t.y,e.y,n,o),t.z=c.MathUtils.damp(t.z,e.z,n,o)}w.current=y;var C=r.useState((function(){return{animating:!1,focus:new c.Vector3,camera:new c.Vector3,zoom:1}})),P=(0,s.Z)(C,1)[0],S=r.useState((function(){return{focus:new c.Vector3,camera:new c.Vector3,zoom:1}})),E=(0,s.Z)(S,1)[0],L=r.useState((function(){return new c.Box3})),Z=(0,s.Z)(L,1)[0],A=r.useMemo((function(){function t(){var t=Z.getSize(new c.Vector3),e=Z.getCenter(new c.Vector3),n=Math.max(t.x,t.y,t.z),o=u(v)?4*n:n/(2*Math.atan(Math.PI*v.fov/360)),a=u(v)?4*n:o/v.aspect,r=x*Math.max(o,a);return{box:Z,size:t,center:e,distance:r}}return{getSize:t,refresh:function(e){if((o=e)&&o.isBox3)Z.copy(e);else{var n=e||z.current;n.updateWorldMatrix(!0,!0),Z.setFromObject(n)}var o;if(Z.isEmpty()){var a=v.position.length()||10;Z.setFromCenterAndSize(new c.Vector3,new c.Vector3(a,a,a))}if("OrthographicTrackballControls"===(null==j?void 0:j.constructor.name)){var r=t().distance,i=v.position.clone().sub(j.target).normalize().multiplyScalar(r),s=j.target.clone().add(i);v.position.copy(s)}return this},clip:function(){var e=t().distance;return j&&(j.maxDistance=10*e),v.near=e/100,v.far=100*e,v.updateProjectionMatrix(),j&&j.update(),M(),this},fit:function(){P.camera.copy(v.position),j&&P.focus.copy(j.target);var e=t(),n=e.center,a=e.distance,r=n.clone().sub(v.position).normalize().multiplyScalar(a);if(E.camera.copy(n).sub(r),E.focus.copy(n),u(v)){P.zoom=v.zoom;var i=0,s=0,m=[new c.Vector3(Z.min.x,Z.min.y,Z.min.z),new c.Vector3(Z.min.x,Z.max.y,Z.min.z),new c.Vector3(Z.min.x,Z.min.y,Z.max.z),new c.Vector3(Z.min.x,Z.max.y,Z.max.z),new c.Vector3(Z.max.x,Z.max.y,Z.max.z),new c.Vector3(Z.max.x,Z.max.y,Z.min.z),new c.Vector3(Z.max.x,Z.min.y,Z.max.z),new c.Vector3(Z.max.x,Z.min.y,Z.min.z)];n.applyMatrix4(v.matrixWorldInverse);for(var l=0,f=m;l<f.length;l++){var p=f[l];p.applyMatrix4(v.matrixWorldInverse),i=Math.max(i,Math.abs(p.y-n.y)),s=Math.max(s,Math.abs(p.x-n.x))}i*=2,s*=2;var h=(v.top-v.bottom)/i,d=(v.right-v.left)/s;E.zoom=Math.min(h,d)/x,o||(v.zoom=E.zoom,v.updateProjectionMatrix())}return o?P.animating=!0:(v.position.copy(E.camera),v.lookAt(E.focus),j&&(j.target.copy(E.focus),j.update())),w.current&&w.current(this.getSize()),M(),this}}}),[Z,v,j,x,o,M]);r.useLayoutEffect((function(){if(j){var t=function(){return P.animating=!1};return j.addEventListener("start",t),function(){return j.removeEventListener("start",t)}}}),[j]);var R=r.useRef(0);return r.useLayoutEffect((function(){(f||0===R.current++)&&(A.refresh(),a&&A.fit(),i&&A.clip())}),[b,i,a,f,v,j]),(0,m.x)((function(t,e){if(P.animating){if(k(P.focus,E.focus,o,e),k(P.camera,E.camera,o,e),P.zoom=c.MathUtils.damp(P.zoom,E.zoom,o,e),v.position.copy(P.camera),u(v)&&(v.zoom=P.zoom,v.updateProjectionMatrix()),j?(j.target.copy(P.focus),j.update()):v.lookAt(P.focus),M(),u(v)&&!(Math.abs(P.zoom-E.zoom)<d))return;if(!u(v)&&!V(P.camera,E.camera))return;if(j&&!V(P.focus,E.focus))return;P.animating=!1}})),r.createElement("group",{ref:z},r.createElement(l.Provider,{value:A},e))}var p=n(3655),x=n(8202),h=n(3520),d=n(127),y=n(184),z=["name"],g=function(t){var e=t.name,n=(0,a.Z)(t,z),r=(0,p.L)(d).nodes;return(0,y.jsx)("mesh",(0,o.Z)((0,o.Z)({geometry:r[e].geometry,material:r[e].material,"material-emissive":"red","material-roughness":1},n),{},{dispose:null}))},v=function(t){var e=t.children,n=r.useContext(l);return(0,y.jsx)("group",{onClick:function(t){t.stopPropagation(),t.delta<=2&&n.refresh(t.object).fit()},onPointerMissed:function(t){return 0===t.button&&n.refresh().fit()},children:e})},M=function(t){var e=t.children;return(0,y.jsxs)(y.Fragment,{children:[e,(0,y.jsxs)(i.Xz,{camera:{position:[0,-10,80],fov:50},dpr:[1,2],children:[(0,y.jsx)("spotLight",{position:[-100,-100,-100],intensity:.2,angle:.3,penumbra:1}),(0,y.jsx)("hemisphereLight",{color:"white",groundColor:"#ff0f00",position:[-7,25,13],intensity:1}),(0,y.jsxs)(r.Suspense,{fallback:null,children:[(0,y.jsx)(f,{fit:!0,clip:!0,margin:1.2,children:(0,y.jsxs)(v,{children:[(0,y.jsx)(g,{name:"Curly",position:[1,-11,-20],rotation:[2,0,0]}),(0,y.jsx)(g,{name:"DNA",position:[20,0,-17],rotation:[1,1,-2]}),(0,y.jsx)(g,{name:"Headphones",position:[20,2,4],rotation:[1,0,-1]}),(0,y.jsx)(g,{name:"Notebook",position:[-21,-15,-13],rotation:[2,0,1]}),(0,y.jsx)(g,{name:"Rocket003",position:[18,15,-25],rotation:[1,1,0]}),(0,y.jsx)(g,{name:"Roundcube001",position:[-25,-4,5],rotation:[1,0,0],scale:.5}),(0,y.jsx)(g,{name:"Table",position:[1,-4,-28],rotation:[1,0,-1],scale:.5}),(0,y.jsx)(g,{name:"VR_Headset",position:[7,-15,28],rotation:[1,0,-1],scale:5}),(0,y.jsx)(g,{name:"Zeppelin",position:[-20,10,10],rotation:[3,-1,3],scale:.005})]})}),(0,y.jsx)(x.j,{"rotation-x":Math.PI/2,position:[0,-35,0],opacity:.2,width:200,height:200,blur:1,far:50})]}),(0,y.jsx)(h.z,{makeDefault:!0,minPolarAngle:0,maxPolarAngle:Math.PI/1.75})]})]})}},127:function(t,e,n){t.exports=n.p+"static/media/compressed.9d646d8f6c772acb56c9.glb"}}]);
//# sourceMappingURL=98.d6ec339f.chunk.js.map