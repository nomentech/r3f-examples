"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[51],{51:function(e,n,r){r.r(n),r.d(n,{default:function(){return T}});var o=r(3433),t=r(9439),c=r(2791),i=r(4647),s=r(5647),a=r(7762),u=r(4925),f=r(1413),d=r(7760),l=r(1690),h=r(9),p=r(8334),x=r(5955),m=r(5121),j=r(184),v=["children"],Z=["name","connectedTo","position"],g=new d.Vector3(1,1,0),b=new d.Vector3,y=(0,c.createContext)(null),w=function(e){return(0,j.jsxs)("mesh",(0,f.Z)((0,f.Z)({},e),{},{children:[(0,j.jsx)("circleGeometry",{args:[.05,16]}),(0,j.jsx)("meshBasicMaterial",{color:"#ff1050"})]}))},k=function(e){var n=e.children,r=((0,u.Z)(e,v),(0,c.useState)([])),o=(0,t.Z)(r,2),i=o[0],s=o[1],f=(0,c.useMemo)((function(){var e,n=[],r=(0,a.Z)(i);try{var o=function(){var r=e.value;r.connectedTo.length&&r.connectedTo.map((function(e){return[r.position,e.current.position]})).forEach((function(e){var r=(0,t.Z)(e,2),o=r[0],c=r[1];o=o.clone().add(b.set(.25,0,0)),c=c.clone().add(b.set(-.25,0,0));var i=o.clone().add(c.clone().sub(o)).add(new d.Vector3(0,o.y-c.y,0));n.push(new d.QuadraticBezierCurve3(o,i,c).getPoints(20))}))};for(r.s();!(e=r.n()).done;)o()}catch(c){r.e(c)}finally{r.f()}return n}),[i]),p=(0,c.useRef)();return(0,l.x)((function(e,n){return p.current.children.forEach((function(e){return e.material.uniforms.dashOffset.value-=n}))})),(0,j.jsxs)(y.Provider,{value:s,children:[(0,j.jsx)("group",{ref:p,children:f.map((function(e,n){return(0,j.jsx)(h.x,{points:e,color:"white",dashed:!0,dashScale:5,alphaWrite:void 0},n)}))}),n,f.map((function(e,n){return(0,j.jsxs)("group",{"position-z":1,children:[(0,j.jsx)(w,{position:e[0]}),(0,j.jsx)(w,{position:e[e.length-1]})]},n)}))]})},S=(0,c.forwardRef)((function(e,n){var r=e.name,i=e.connectedTo,a=void 0===i?[]:i,h=e.position,v=void 0===h?[0,0,0]:h,w=(0,u.Z)(e,Z),k=(0,c.useContext)(y),S=(0,l.w)(),T=S.size,z=S.camera,C=(0,c.useState)((function(){return(0,s.Z)(d.Vector3,(0,o.Z)(v))})),B=(0,t.Z)(C,2),E=B[0],M=B[1],P=(0,c.useMemo)((function(){return{position:E,connectedTo:a}}),[E,a]);(0,c.useLayoutEffect)((function(){return k((function(e){return[].concat((0,o.Z)(e),[P])})),function(){k((function(e){return(0,m.Z)(e,P)}))}}),[P,E]);var V=(0,c.useState)(!1),O=(0,t.Z)(V,2),R=O[0],G=O[1];(0,c.useEffect)((function(){document.body.style.cursor=R?"grab":"auto"}),[R]);var W=(0,x.useDrag)((function(e){var n=e.down,r=(0,t.Z)(e.xy,2),o=r[0],c=r[1];document.body.style.cursor=n?"grabbing":"grab";var i=b.set(o/T.width*2-1,-c/T.height*2+1,0).unproject(z).multiply(g).clone();M(i)}));return(0,j.jsxs)("mesh",(0,f.Z)((0,f.Z)((0,f.Z)({ref:n},W()),{},{onPointerOver:function(){return G(!0)},onPointerOut:function(){return G(!1)},position:E},w),{},{children:[(0,j.jsx)("boxBufferGeometry",{args:[.5,.5,.5]}),(0,j.jsx)("meshBasicMaterial",{color:R?"#ff1050":"black"}),(0,j.jsx)(p.x,{position:[0,0,1],fontSize:.25,children:r})]}))})),T=function(e){var n=e.children,r=(0,c.useState)((function(){return(0,o.Z)(Array(5)).map(c.createRef)})),s=(0,t.Z)(r,1),a=(0,t.Z)(s[0],5),u=a[0],f=a[1],d=a[2],l=a[3],h=a[4];return(0,j.jsxs)(j.Fragment,{children:[n,(0,j.jsxs)(i.Xz,{orthographic:!0,camera:{zoom:80},dpr:[1,2],children:[(0,j.jsx)("color",{attach:"background",args:[5263440]}),(0,j.jsx)(c.Suspense,{fallback:null,children:(0,j.jsxs)(k,{dashed:!0,color:"#ff1050",lineWidth:1,children:[(0,j.jsx)(S,{ref:u,name:"a",position:[-2,2.5,0],connectedTo:[f,d,h]}),(0,j.jsx)(S,{ref:f,name:"b",position:[0,1,0],connectedTo:[l,u]}),(0,j.jsx)(S,{ref:d,name:"c",position:[-.25,0,0]}),(0,j.jsx)(S,{ref:l,name:"d",position:[2,.5,0]}),(0,j.jsx)(S,{ref:h,name:"e",position:[-.5,-1,0]})]})})]})]})}}}]);
//# sourceMappingURL=51.e09c1657.chunk.js.map