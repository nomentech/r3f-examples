"use strict";(self.webpackChunkr3f_examples=self.webpackChunkr3f_examples||[]).push([[1907],{8202:function(e,t,r){r.d(t,{j:function(){return d}});var n=r(1413),o=r(9439),a=r(4925),i=r(7462),u=r(2791),c=r(7760),s=r(1690),v={uniforms:{tDiffuse:{value:null},h:{value:1/512}},vertexShader:"\n      varying vec2 vUv;\n\n      void main() {\n\n        vUv = uv;\n        gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n      }\n  ",fragmentShader:"\n    uniform sampler2D tDiffuse;\n    uniform float h;\n\n    varying vec2 vUv;\n\n    void main() {\n\n    \tvec4 sum = vec4( 0.0 );\n\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 4.0 * h, vUv.y ) ) * 0.051;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x - 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 1.0 * h, vUv.y ) ) * 0.1531;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 2.0 * h, vUv.y ) ) * 0.12245;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 3.0 * h, vUv.y ) ) * 0.0918;\n    \tsum += texture2D( tDiffuse, vec2( vUv.x + 4.0 * h, vUv.y ) ) * 0.051;\n\n    \tgl_FragColor = sum;\n\n    }\n  "},l={uniforms:{tDiffuse:{value:null},v:{value:1/512}},vertexShader:"\n    varying vec2 vUv;\n\n    void main() {\n\n      vUv = uv;\n      gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n    }\n  ",fragmentShader:"\n\n  uniform sampler2D tDiffuse;\n  uniform float v;\n\n  varying vec2 vUv;\n\n  void main() {\n\n    vec4 sum = vec4( 0.0 );\n\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 4.0 * v ) ) * 0.051;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y - 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y ) ) * 0.1633;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 1.0 * v ) ) * 0.1531;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 2.0 * v ) ) * 0.12245;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 3.0 * v ) ) * 0.0918;\n    sum += texture2D( tDiffuse, vec2( vUv.x, vUv.y + 4.0 * v ) ) * 0.051;\n\n    gl_FragColor = sum;\n\n  }\n  "},f=["scale","frames","opacity","width","height","blur","far","resolution","smooth","color","depthWrite","renderOrder"],d=u.forwardRef((function(e,t){var r=e.scale,d=void 0===r?10:r,m=e.frames,p=void 0===m?1/0:m,h=e.opacity,x=void 0===h?1:h,g=e.width,y=void 0===g?1:g,w=e.height,D=void 0===w?1:w,M=e.blur,U=void 0===M?1:M,E=e.far,b=void 0===E?10:E,C=e.resolution,P=void 0===C?512:C,W=e.smooth,O=void 0===W||W,R=e.color,S=void 0===R?"#000000":R,T=e.depthWrite,z=void 0!==T&&T,Z=e.renderOrder,j=(0,a.Z)(e,f),k=(0,s.w)((function(e){return e.scene})),F=(0,s.w)((function(e){return e.gl})),N=u.useRef(null);y*=Array.isArray(d)?d[0]:d||1,D*=Array.isArray(d)?d[1]:d||1;var I=u.useMemo((function(){var e=new c.WebGLRenderTarget(P,P),t=new c.WebGLRenderTarget(P,P);t.texture.generateMipmaps=e.texture.generateMipmaps=!1;var r=new c.PlaneBufferGeometry(y,D).rotateX(Math.PI/2),o=new c.Mesh(r),a=new c.MeshDepthMaterial;a.depthTest=a.depthWrite=!1,a.onBeforeCompile=function(e){e.uniforms=(0,n.Z)((0,n.Z)({},e.uniforms),{},{ucolor:{value:new c.Color(S).convertSRGBToLinear()}}),e.fragmentShader=e.fragmentShader.replace("void main() {","uniform vec3 ucolor;\n           void main() {\n          "),e.fragmentShader=e.fragmentShader.replace("vec4( vec3( 1.0 - fragCoordZ ), opacity );","vec4( ucolor, ( 1.0 - fragCoordZ ) * 1.0 );")};var i=new c.ShaderMaterial(v),u=new c.ShaderMaterial(l);return u.depthTest=i.depthTest=!1,[e,r,a,o,i,u,t]}),[P,y,D,d,S]),L=(0,o.Z)(I,7),A=L[0],V=L[1],_=L[2],B=L[3],G=L[4],X=L[5],q=L[6],H=function(e){B.visible=!0,B.material=G,G.uniforms.tDiffuse.value=A.texture,G.uniforms.h.value=1*e/256,F.setRenderTarget(q),F.render(B,N.current),B.material=X,X.uniforms.tDiffuse.value=q.texture,X.uniforms.v.value=1*e/256,F.setRenderTarget(A),F.render(B,N.current),B.visible=!1},J=0;return(0,s.x)((function(){if(N.current&&(p===1/0||J<p)){var e=k.background;k.background=null;var t=k.overrideMaterial;k.overrideMaterial=_,F.setRenderTarget(A),F.render(k,N.current),k.overrideMaterial=t,H(U),O&&H(.4*U),F.setRenderTarget(null),k.background=e,J++}})),u.createElement("group",(0,i.Z)({"rotation-x":Math.PI/2},j,{ref:t}),u.createElement("mesh",{renderOrder:Z,geometry:V,scale:[1,-1,1],rotation:[-Math.PI/2,0,0]},u.createElement("meshBasicMaterial",{map:A.texture,"map-encoding":F.outputEncoding,transparent:!0,opacity:x,depthWrite:z})),u.createElement("orthographicCamera",{ref:N,args:[-y/2,y/2,D/2,-D/2,0,b]}))}))},4637:function(e,t,r){r.d(t,{z:function(){return s}});var n=r(4925),o=r(7462),a=r(1690),i=r(2791),u=r(233),c=["makeDefault","camera","regress","domElement","enableDamping","onChange","onStart","onEnd"],s=i.forwardRef((function(e,t){var r=e.makeDefault,s=e.camera,v=e.regress,l=e.domElement,f=e.enableDamping,d=void 0===f||f,m=e.onChange,p=e.onStart,h=e.onEnd,x=(0,n.Z)(e,c),g=(0,a.w)((function(e){return e.invalidate})),y=(0,a.w)((function(e){return e.camera})),w=(0,a.w)((function(e){return e.gl})),D=(0,a.w)((function(e){return e.events})),M=(0,a.w)((function(e){return e.set})),U=(0,a.w)((function(e){return e.get})),E=(0,a.w)((function(e){return e.performance})),b=s||y,C=l||D.connected||w.domElement,P=i.useMemo((function(){return new u.z(b)}),[b]);return(0,a.x)((function(){P.enabled&&P.update()}),-1),i.useEffect((function(){return P.connect(C),function(){P.dispose()}}),[C,v,P,g]),i.useEffect((function(){var e=function(e){g(),v&&E.regress(),m&&m(e)};return P.addEventListener("change",e),p&&P.addEventListener("start",p),h&&P.addEventListener("end",h),function(){p&&P.removeEventListener("start",p),h&&P.removeEventListener("end",h),P.removeEventListener("change",e)}}),[m,p,h]),i.useEffect((function(){if(r){var e=U().controls;return M({controls:P}),function(){return M({controls:e})}}}),[r,P]),i.createElement("primitive",(0,o.Z)({ref:t,object:P,enableDamping:d},x))}))},4956:function(e,t,r){r.d(t,{V:function(){return D}});var n=r(1413),o=r(9439),a=r(4925),i=r(7462),u=r(2791),c=r(1250),s=r(7760),v=r(1690),l=["children","eps","style","className","prepend","center","fullscreen","portal","distanceFactor","sprite","transform","occlude","onOcclude","zIndexRange","calculatePosition","as","wrapperClass","pointerEvents"],f=new s.Vector3,d=new s.Vector3,m=new s.Vector3;function p(e,t,r){var n=f.setFromMatrixPosition(e.matrixWorld);n.project(t);var o=r.width/2,a=r.height/2;return[n.x*o+o,-n.y*a+a]}var h=function(e){return Math.abs(e)<1e-10?0:e};function x(e,t){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",n="matrix3d(",o=0;16!==o;o++)n+=h(t[o]*e.elements[o])+(15!==o?",":")");return r+n}var g,y=(g=[1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1],function(e){return x(e,g)}),w=function(e,t){return x(e,[1/(r=t),1/r,1/r,1,-1/r,-1/r,-1/r,-1,1/r,1/r,1/r,1,1,1,1,1],"translate(-50%,-50%)");var r},D=u.forwardRef((function(e,t){var r,x=e.children,g=e.eps,D=void 0===g?.001:g,M=e.style,U=e.className,E=e.prepend,b=e.center,C=e.fullscreen,P=e.portal,W=e.distanceFactor,O=e.sprite,R=void 0!==O&&O,S=e.transform,T=void 0!==S&&S,z=e.occlude,Z=e.onOcclude,j=e.zIndexRange,k=void 0===j?[16777271,0]:j,F=e.calculatePosition,N=void 0===F?p:F,I=e.as,L=void 0===I?"div":I,A=e.wrapperClass,V=e.pointerEvents,_=void 0===V?"auto":V,B=(0,a.Z)(e,l),G=(0,v.w)((function(e){return e.gl})),X=(0,v.w)((function(e){return e.camera})),q=(0,v.w)((function(e){return e.scene})),H=(0,v.w)((function(e){return e.size})),J=(0,v.w)((function(e){return e.raycaster})),K=u.useState((function(){return document.createElement(L)})),Q=(0,o.Z)(K,1)[0],Y=u.useMemo((function(){return c.createRoot(Q)}),[Q]),$=u.useRef(null),ee=u.useRef(0),te=u.useRef([0,0]),re=u.useRef(null),ne=u.useRef(null),oe=null!==(r=null==P?void 0:P.current)&&void 0!==r?r:G.domElement.parentNode;u.useEffect((function(){if($.current){if(q.updateMatrixWorld(),T)Q.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{var e=N($.current,X,H);Q.style.cssText="position:absolute;top:0;left:0;transform:translate3d(".concat(e[0],"px,").concat(e[1],"px,0);transform-origin:0 0;")}return oe&&(E?oe.prepend(Q):oe.appendChild(Q)),function(){oe&&oe.removeChild(Q),Y.unmount()}}}),[oe,T]),u.useLayoutEffect((function(){A&&(Q.className=A)}),[A]);var ae=u.useMemo((function(){return T?{position:"absolute",top:0,left:0,width:H.width,height:H.height,transformStyle:"preserve-3d",pointerEvents:"none"}:(0,n.Z)((0,n.Z)({position:"absolute",transform:b?"translate3d(-50%,-50%,0)":"none"},C&&{top:-H.height/2,left:-H.width/2,width:H.width,height:H.height}),M)}),[M,b,C,H,T]),ie=u.useMemo((function(){return{position:"absolute",pointerEvents:_}}),[_]);u.useLayoutEffect((function(){T?Y.render(u.createElement("div",{ref:re,style:ae},u.createElement("div",{ref:ne,style:ie},u.createElement("div",{ref:t,className:U,style:M,children:x})))):Y.render(u.createElement("div",{ref:t,style:ae,className:U,children:x}))}));var ue=u.useRef(!0);return(0,v.x)((function(){if($.current){X.updateMatrixWorld(),$.current.updateWorldMatrix(!0,!1);var e=T?te.current:N($.current,X,H);if(T||Math.abs(ee.current-X.zoom)>D||Math.abs(te.current[0]-e[0])>D||Math.abs(te.current[1]-e[1])>D){var t=function(e,t){var r=f.setFromMatrixPosition(e.matrixWorld),n=d.setFromMatrixPosition(t.matrixWorld),o=r.sub(n),a=t.getWorldDirection(m);return o.angleTo(a)>Math.PI/2}($.current,X),r=!1;"boolean"===typeof z?!0===z&&(r=[q]):Array.isArray(z)&&(r=z.map((function(e){return e.current})));var n=ue.current;if(r){var o=function(e,t,r,n){var o=f.setFromMatrixPosition(e.matrixWorld),a=o.clone();a.project(t),r.setFromCamera(a,t);var i=r.intersectObjects(n,!0);if(i.length){var u=i[0].distance;return o.distanceTo(r.ray.origin)<u}return!0}($.current,X,J,r);ue.current=o&&!t}else ue.current=!t;if(n!==ue.current&&(Z?Z(!ue.current):Q.style.display=ue.current?"block":"none"),Q.style.zIndex="".concat(function(e,t,r){if(t instanceof s.PerspectiveCamera||t instanceof s.OrthographicCamera){var n=f.setFromMatrixPosition(e.matrixWorld),o=d.setFromMatrixPosition(t.matrixWorld),a=n.distanceTo(o),i=(r[1]-r[0])/(t.far-t.near),u=r[1]-i*t.far;return Math.round(i*a+u)}}($.current,X,k)),T){var a=H.width/2,i=H.height/2,u=X.projectionMatrix.elements[5]*i,c=X.isOrthographicCamera,v=X.top,l=X.left,p=X.bottom,x=X.right,g=y(X.matrixWorldInverse),M=c?"scale(".concat(u,")translate(").concat(h(-(x+l)/2),"px,").concat(h((v+p)/2),"px)"):"translateZ(".concat(u,"px)"),U=$.current.matrixWorld;R&&((U=X.matrixWorldInverse.clone().transpose().copyPosition(U).scale($.current.scale)).elements[3]=U.elements[7]=U.elements[11]=0,U.elements[15]=1),Q.style.width=H.width+"px",Q.style.height=H.height+"px",Q.style.perspective=c?"":"".concat(u,"px"),re.current&&ne.current&&(re.current.style.transform="".concat(M).concat(g,"translate(").concat(a,"px,").concat(i,"px)"),ne.current.style.transform=w(U,1/((W||10)/400)))}else{var E=void 0===W?1:function(e,t){if(t instanceof s.OrthographicCamera)return t.zoom;if(t instanceof s.PerspectiveCamera){var r=f.setFromMatrixPosition(e.matrixWorld),n=d.setFromMatrixPosition(t.matrixWorld),o=t.fov*Math.PI/180,a=r.distanceTo(n);return 1/(2*Math.tan(o/2)*a)}return 1}($.current,X)*W;Q.style.transform="translate3d(".concat(e[0],"px,").concat(e[1],"px,0) scale(").concat(E,")")}te.current=e,ee.current=X.zoom}}})),u.createElement("group",(0,i.Z)({},B,{ref:$}))}))},9135:function(e,t,r){r.d(t,{Nh4:function(){return l}});var n=r(2791),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=n.createContext&&n.createContext(o),i=function(){return i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},i.apply(this,arguments)},u=function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};function c(e){return e&&e.map((function(e,t){return n.createElement(e.tag,i({key:t},e.attr),c(e.child))}))}function s(e){return function(t){return n.createElement(v,i({attr:i({},e.attr)},t),c(e.child))}}function v(e){var t=function(t){var r,o=e.attr,a=e.size,c=e.title,s=u(e,["attr","size","title"]),v=a||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",i({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,s,{className:r,style:i(i({color:e.color||t.color},t.style),e.style),height:v,width:v,xmlns:"http://www.w3.org/2000/svg"}),c&&n.createElement("title",null,c),e.children)};return void 0!==a?n.createElement(a.Consumer,null,(function(e){return t(e)})):t(o)}function l(e){return s({tag:"svg",attr:{viewBox:"0 0 384 512"},child:[{tag:"path",attr:{d:"M172.268 501.67C26.97 291.031 0 269.413 0 192 0 85.961 85.961 0 192 0s192 85.961 192 192c0 77.413-26.97 99.031-172.268 309.67-9.535 13.774-29.93 13.773-39.464 0zM192 272c44.183 0 80-35.817 80-80s-35.817-80-80-80-80 35.817-80 80 35.817 80 80 80z"}}]})(e)}}}]);
//# sourceMappingURL=1907.d7553f50.chunk.js.map